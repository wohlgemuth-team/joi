!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=11)}([function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":n(e))&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){var n={};t.escapeHtml=function(e){if(!e)return"";for(var t="",r=0;r<e.length;++r){var i=e.charCodeAt(r);n.isSafe(i)?t+=e[r]:t+=n.escapeHtmlChar(i)}return t},n.isSafe=function(e){return void 0!==n.safeCharCodes[e]},n.escapeHtmlChar=function(e){var t=n.namedHtml[e];if(void 0!==t)return t;if(e>=256)return"&#"+e+";";var r=e.toString(16);return"&#x"+n.padLeft(r,2)+";"},n.padLeft=function(e,t){for(;e.length<t;)e="0"+e;return e},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){for(var e={},t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,r){var i="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},a=r(0);t.applyToDefaults=function(e,r,n){if(t.assert(e&&"object"===(void 0===e?"undefined":i(e)),"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"===(void 0===r?"undefined":i(r)),"Invalid options value: must be true, falsy or an object"),!r)return null;var a=t.clone(e);return!0===r?a:t.merge(a,r,!0===n,!1)},t.assert=function(e){if(!e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(1===n.length&&n[0]instanceof Error)throw n[0];var a=n.filter(function(e){return""!==e}).map(function(e){return"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e)});throw new Error(a.join(" ")||"Unknown error")}},t.clone=function(e,r){if("object"!==(void 0===e?"undefined":i(e))||null===e)return e;var n=(r=r||new Map).get(e);if(n)return n;var a=void 0,o=!1;if(Array.isArray(e))a=[],o=!0;else if(e instanceof Date)a=new Date(e.getTime());else if(e instanceof RegExp)a=new RegExp(e);else{var s=Object.getPrototypeOf(e);s&&s.isImmutable?a=e:(a=Object.create(s),o=!0)}if(r.set(e,a),o)for(var l=Object.getOwnPropertyNames(e),c=0;c<l.length;++c){var u=l[c],f=Object.getOwnPropertyDescriptor(e,u);f&&(f.get||f.set)?Object.defineProperty(a,u,f):a[u]=t.clone(e[u],r)}return a},t.contain=function(e,r,n){var a=null;"object"!==(void 0===e?"undefined":i(e))||"object"!==(void 0===r?"undefined":i(r))||Array.isArray(e)||Array.isArray(r)?r=[].concat(r):(a=r,r=Object.keys(r)),n=n||{},t.assert("string"==typeof e||"object"===(void 0===e?"undefined":i(e)),"Reference must be string or an object"),t.assert(r.length,"Values array cannot be empty");var o=void 0,s=void 0;if(n.deep){o=t.deepEqual;var l=n.hasOwnProperty("only"),c=n.hasOwnProperty("part");s={prototype:l?n.only:!!c&&!n.part,part:l?!n.only:!c||n.part}}else o=function(e,t){return e===t};for(var u=!1,f=new Array(r.length),h=0;h<f.length;++h)f[h]=0;if("string"==typeof e){for(var p="(",d=0;d<r.length;++d){var v=r[d];t.assert("string"==typeof v,"Cannot compare string reference to non-string value"),p+=(d?"|":"")+t.escapeRegex(v)}var y=new RegExp(p+")","g");u=!!e.replace(y,function(e,t){var n=r.indexOf(t);return++f[n],""})}else if(Array.isArray(e))for(var m=0;m<e.length;++m){for(var g=!1,b=0;b<r.length&&!1===g;++b)g=o(r[b],e[m],s)&&b;!1!==g?++f[g]:u=!0}else for(var _=Object.getOwnPropertyNames(e),w=0;w<_.length;++w){var k=_[w],x=r.indexOf(k);if(-1!==x){if(a&&!o(a[k],e[k],s))return!1;++f[x]}else u=!0}for(var E=!1,j=0;j<f.length;++j)if(E=E||!!f[j],n.once&&f[j]>1||!n.part&&!f[j])return!1;return(!n.only||!u)&&E},t.deepEqual=function(e,r,n,a){n=n||{prototype:!0};var o=void 0===e?"undefined":i(e);if(o!==(void 0===r?"undefined":i(r)))return!1;if("object"!==o||null===e||null===r)return e===r?0!==e||1/e==1/r:e!=e&&r!=r;if(-1!==(a=a||[]).indexOf(e))return!0;if(a.push(e),Array.isArray(e)){if(!Array.isArray(r))return!1;if(!n.part&&e.length!==r.length)return!1;for(var s=0;s<e.length;++s){if(n.part){for(var l=!1,c=0;c<r.length;++c)if(t.deepEqual(e[s],r[c],n)){l=!0;break}return l}if(!t.deepEqual(e[s],r[s],n))return!1}return!0}if(e instanceof Date)return r instanceof Date&&e.getTime()===r.getTime();if(e instanceof RegExp)return r instanceof RegExp&&e.toString()===r.toString();if(n.prototype&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(r))return!1;var u=Object.getOwnPropertyNames(e);if(!n.part&&u.length!==Object.getOwnPropertyNames(r).length)return!1;for(var f=0;f<u.length;++f){var h=u[f],p=Object.getOwnPropertyDescriptor(e,h);if(p.get){if(!t.deepEqual(p,Object.getOwnPropertyDescriptor(r,h),n,a))return!1}else if(!t.deepEqual(e[h],r[h],n,a))return!1}return!0},t.escapeHtml=function(e){return a.escapeHtml(e)},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.flatten=function(e,r){for(var n=r||[],i=0;i<e.length;++i)Array.isArray(e[i])?t.flatten(e[i],n):n.push(e[i]);return n},t.mapToObject=function(e,t){if(!e)return null;for(var r={},n=0;n<e.length;++n)t?e[n][t]&&(r[e[n][t]]=!0):r[e[n]]=!0;return r},t.merge=function(e,r,n,a){if(t.assert(e&&"object"===(void 0===e?"undefined":i(e)),"Invalid target value: must be an object"),t.assert(null===r||void 0===r||"object"===(void 0===r?"undefined":i(r)),"Invalid source value: must be null, undefined, or an object"),!r)return e;if(Array.isArray(r)){t.assert(Array.isArray(e),"Cannot merge array onto an object"),!1===a&&(e.length=0);for(var o=0;o<r.length;++o)e.push(t.clone(r[o]));return e}for(var s=Object.keys(r),l=0;l<s.length;++l){var c=s[l];if("__proto__"!==c){var u=r[c];u&&"object"===(void 0===u?"undefined":i(u))?!e[c]||"object"!==i(e[c])||Array.isArray(e[c])!==Array.isArray(u)||u instanceof Date||u instanceof RegExp?e[c]=t.clone(u):t.merge(e[c],u,n,a):null!==u&&void 0!==u?e[c]=u:!1!==n&&(e[c]=u)}}return e},t.reach=function(e,r,n){if(!1===r||null===r||void 0===r)return e;"string"==typeof(n=n||{})&&(n={separator:n});for(var a=r.split(n.separator||"."),o=e,s=0;s<a.length;++s){var l=a[s];if("-"===l[0]&&Array.isArray(o)&&(l=l.slice(1,l.length),l=o.length-l),!o||"object"!==(void 0===o?"undefined":i(o))&&"function"!=typeof o||!(l in o)||"object"!==(void 0===o?"undefined":i(o))&&!1===n.functions){t.assert(!n.strict||s+1===a.length,"Missing segment",l,"in reach path ",r),t.assert("object"===(void 0===o?"undefined":i(o))||!0===n.functions||"function"!=typeof o,"Invalid segment",l,"in reach path ",r),o=n.default;break}o=o[l]}return o},t.stringify=function(){try{for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return JSON.stringify.apply(null,t)}catch(e){return"[Cannot display object: "+e.message+"]"}},t.unique=function(e,t){var r=void 0;if(t){r=[];var n=new Set;e.forEach(function(e){var i=e[t];n.has(i)||(n.add(i),r.push(e))})}else r=Array.from(new Set(e));return r},t.isIPv6=function(e){return/^(([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))$/.test(e)}}])},function(e,t,r){"use strict";var n=r(0);t.create=function(e,t){n.assert("string"==typeof e,"Invalid reference key:",e);var r=n.clone(t),i=function e(t,i){return n.reach(e.isContext?i.context:t,e.key,r)};return i.isContext=e[0]===(r&&r.contextPrefix||"$"),i.key=i.isContext?e.slice(1):e,i.path=i.key.split(r&&r.separator||"."),i.depth=i.path.length,i.root=i.path[0],i.isJoi=!0,i.toString=function(){return(i.isContext?"context:":"ref:")+i.key},i},t.isRef=function(e){return"function"==typeof e&&e.isJoi},t.push=function(e,r){t.isRef(r)&&!r.isContext&&e.push(r.root)}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(0),o=r(10),s=r(1),l=r(4),c=null,u=null,f={Set:r(9),defaults:{abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",strip:!1,noDefaults:!1,escapeHtml:!1}};e.exports=f.Any=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u=u||r(3),this.isJoi=!0,this._type="any",this._settings=null,this._valids=new f.Set,this._invalids=new f.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}}return i(e,[{key:"createError",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._flags;return l.create(e,t,r,n,i)}},{key:"createOverrideError",value:function(e,t,r,n,i,a){return l.create(e,t,r,n,this._flags,i,a)}},{key:"checkOptions",value:function(e){var t=r(24).options.validate(e);if(t.error)throw new Error(t.error.details[0].message)}},{key:"clone",value:function(){var e=Object.create(Object.getPrototypeOf(this));e.isJoi=!0,e._currentJoi=this._currentJoi,e._type=this._type,e._settings=this._settings,e._baseType=this._baseType,e._valids=this._valids.slice(),e._invalids=this._invalids.slice(),e._tests=this._tests.slice(),e._refs=this._refs.slice(),e._flags=a.clone(this._flags),e._description=this._description,e._unit=this._unit,e._notes=this._notes.slice(),e._tags=this._tags.slice(),e._examples=this._examples.slice(),e._meta=this._meta.slice(),e._inner={};for(var t=Object.keys(this._inner),r=0;r<t.length;++r){var n=t[r];e._inner[n]=this._inner[n]?this._inner[n].slice():null}return e}},{key:"concat",value:function(e){a.assert(e instanceof f.Any,"Invalid schema object"),a.assert("any"===this._type||"any"===e._type||e._type===this._type,"Cannot merge type",this._type,"with another type:",e._type);var t=this.clone();if("any"===this._type&&"any"!==e._type){for(var r=e.clone(),n=["_settings","_valids","_invalids","_tests","_refs","_flags","_description","_unit","_notes","_tags","_examples","_meta","_inner"],i=0;i<n.length;++i)r[n[i]]=t[n[i]];t=r}t._settings=t._settings?o.concat(t._settings,e._settings):e._settings,t._valids.merge(e._valids,e._invalids),t._invalids.merge(e._invalids,e._valids),t._tests=t._tests.concat(e._tests),t._refs=t._refs.concat(e._refs),a.merge(t._flags,e._flags),t._description=e._description||t._description,t._unit=e._unit||t._unit,t._notes=t._notes.concat(e._notes),t._tags=t._tags.concat(e._tags),t._examples=t._examples.concat(e._examples),t._meta=t._meta.concat(e._meta);for(var s=Object.keys(e._inner),l="object"===t._type,c=0;c<s.length;++c){var u=s[c],h=e._inner[u];if(h){var p=t._inner[u];if(p)if(l&&"children"===u){for(var d={},v=0;v<p.length;++v)d[p[v].key]=v;for(var y=0;y<h.length;++y){var m=h[y].key;d[m]>=0?p[d[m]]={key:m,schema:p[d[m]].schema.concat(h[y].schema)}:p.push(h[y])}}else t._inner[u]=t._inner[u].concat(h);else t._inner[u]=h.slice()}}return t}},{key:"_test",value:function(e,t,r,n){var i=this.clone();return i._tests.push({func:r,name:e,arg:t,options:n}),i}},{key:"options",value:function(e){a.assert(!e.context,"Cannot override context"),this.checkOptions(e);var t=this.clone();return t._settings=o.concat(t._settings,e),t}},{key:"strict",value:function(e){var t=this.clone(),r=void 0!==e&&!e;return t._settings=o.concat(t._settings,{convert:r}),t}},{key:"raw",value:function(e){var t=void 0===e||e;if(this._flags.raw===t)return this;var r=this.clone();return r._flags.raw=t,r}},{key:"error",value:function(e){a.assert(e&&(e instanceof Error||"function"==typeof e),"Must provide a valid Error object or a function");var t=this.clone();return t._flags.error=e,t}},{key:"allow",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this.clone();t=a.flatten(t);for(var i=0;i<t.length;++i){var o=t[i];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),n._invalids.remove(o),n._valids.add(o,n._refs)}return n}},{key:"valid",value:function(){var e=this.allow.apply(this,arguments);return e._flags.allowOnly=!0,e}},{key:"invalid",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this.clone();t=a.flatten(t);for(var i=0;i<t.length;++i){var o=t[i];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),n._valids.remove(o),n._invalids.add(o,n._refs)}return n}},{key:"required",value:function(){if("required"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="required",e}},{key:"optional",value:function(){if("optional"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="optional",e}},{key:"forbidden",value:function(){if("forbidden"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="forbidden",e}},{key:"strip",value:function(){if(this._flags.strip)return this;var e=this.clone();return e._flags.strip=!0,e}},{key:"applyFunctionToChildren",value:function(e,t,r,n){if(1!==(e=[].concat(e)).length||""!==e[0]){n=n?n+".":"";var i=(""===e[0]?e.slice(1):e).map(function(e){return n+e});throw new Error("unknown key(s) "+i.join(", "))}return this[t].apply(this,r)}},{key:"default",value:function(e,t){"function"!=typeof e||s.isRef(e)||(!e.description&&t&&(e.description=t),this._flags.func||a.assert("string"==typeof e.description&&e.description.length>0,"description must be provided when default value is a function"));var r=this.clone();return r._flags.default=e,s.push(r._refs,e),r}},{key:"empty",value:function(e){var t=this.clone();return void 0===e?delete t._flags.empty:t._flags.empty=u.schema(this._currentJoi,e),t}},{key:"when",value:function(e,t){a.assert(t&&"object"===(void 0===t?"undefined":n(t)),"Invalid options"),a.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var i=t.hasOwnProperty("then")?this.concat(u.schema(this._currentJoi,t.then)):void 0,o=t.hasOwnProperty("otherwise")?this.concat(u.schema(this._currentJoi,t.otherwise)):void 0;c=c||r(8);var s={then:i,otherwise:o};Object.prototype.hasOwnProperty.call(t,"is")&&(s.is=t.is);var l=c.when(e,s);return l._flags.presence="ignore",l._baseType=this,l}},{key:"description",value:function(e){a.assert(e&&"string"==typeof e,"Description must be a non-empty string");var t=this.clone();return t._description=e,t}},{key:"notes",value:function(e){a.assert(e&&("string"==typeof e||Array.isArray(e)),"Notes must be a non-empty string or array");var t=this.clone();return t._notes=t._notes.concat(e),t}},{key:"tags",value:function(e){a.assert(e&&("string"==typeof e||Array.isArray(e)),"Tags must be a non-empty string or array");var t=this.clone();return t._tags=t._tags.concat(e),t}},{key:"meta",value:function(e){a.assert(void 0!==e,"Meta cannot be undefined");var t=this.clone();return t._meta=t._meta.concat(e),t}},{key:"example",value:function(){a.assert(1===arguments.length,"Missing example");var e=arguments.length<=0?void 0:arguments[0],t=this.clone();return t._examples.push(e),t}},{key:"unit",value:function(e){a.assert(e&&"string"==typeof e,"Unit name must be a non-empty string");var t=this.clone();return t._unit=e,t}},{key:"_prepareEmptyValue",value:function(e){return"string"==typeof e&&this._flags.trim?e.trim():e}},{key:"_validate",value:function(e,t,r,n){var i=this,c=e;t=t||{key:"",path:[],parent:null,reference:n},this._settings&&(r=o.concat(r,this._settings));var u=[],h=function(){var n=void 0;if(void 0!==e)n=i._flags.raw?c:e;else if(r.noDefaults)n=e;else if(s.isRef(i._flags.default))n=i._flags.default(t.parent,r);else if("function"!=typeof i._flags.default||i._flags.func&&!i._flags.default.description)n=a.clone(i._flags.default);else{var o=void 0;null!==t.parent&&i._flags.default.length>0&&(o=[a.clone(t.parent),r]);var l=f._try(i._flags.default,o);n=l.value,l.error&&u.push(i.createError("any.default",{error:l.error},t,r))}if(u.length&&"function"==typeof i._flags.error){var h=i._flags.error.call(i,u);u="string"==typeof h?[i.createOverrideError("override",{reason:u},t,r,h)]:[].concat(h).map(function(e){return e instanceof Error?e:i.createOverrideError(e.type||"override",e.context,t,r,e.message,e.template)})}return{value:i._flags.strip?void 0:n,finalValue:n,errors:u.length?u:null}};if(this._coerce){var p=this._coerce.call(this,e,t,r);if(p.errors)return e=p.value,u=u.concat(p.errors),h();e=p.value}this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(e),null,f.defaults).errors&&(e=void 0);var d=this._flags.presence||r.presence;if("optional"===d){if(void 0===e){if(!(this._flags.hasOwnProperty("default")&&void 0===this._flags.default)||"object"!==this._type)return h();e={}}}else{if("required"===d&&void 0===e)return u.push(this.createError("any.required",null,t,r)),h();if("forbidden"===d)return void 0===e?h():(u.push(this.createError("any.unknown",null,t,r)),h())}if(this._valids.has(e,t,r,this._flags.insensitive))return h();if(this._invalids.has(e,t,r,this._flags.insensitive)&&(u.push(this.createError(""===e?"any.empty":"any.invalid",null,t,r)),r.abortEarly||void 0===e))return h();if(this._base){var v=this._base.call(this,e,t,r);if(v.errors)return e=v.value,u=u.concat(v.errors),h();if(v.value!==e){if(e=v.value,this._valids.has(e,t,r,this._flags.insensitive))return h();if(this._invalids.has(e,t,r,this._flags.insensitive)&&(u.push(this.createError(""===e?"any.empty":"any.invalid",null,t,r)),r.abortEarly))return h()}}if(this._flags.allowOnly&&(u.push(this.createError("any.allowOnly",{valids:this._valids.values({stripUndefined:!0})},t,r)),r.abortEarly))return h();for(var y=0;y<this._tests.length;++y){var m=this._tests[y].func.call(this,e,t,r);if(m instanceof l.Err){if(u.push(m),r.abortEarly)return h()}else e=m}return h()}},{key:"_validateWithOptions",value:function(e,t,r){t&&this.checkOptions(t);var n=o.concat(f.defaults,t),i=this._validate(e,null,n),a=l.process(i.errors,e);return r?r(a,i.value):{error:a,value:i.value,then:function(e,t){return a?Promise.reject(a).catch(t):Promise.resolve(i.value).then(e)},catch:function(e){return a?Promise.reject(a).catch(e):Promise.resolve(i.value)}}}},{key:"validate",value:function(e,t,r){return"function"==typeof t?this._validateWithOptions(e,null,t):this._validateWithOptions(e,t,r)}},{key:"describe",value:function(){var e=this,t={type:this._type},r=Object.keys(this._flags);if(r.length)if(["empty","default","lazy","label"].some(function(t){return e._flags.hasOwnProperty(t)})){t.flags={};for(var n=0;n<r.length;++n){var i=r[n];"empty"===i?t.flags[i]=this._flags[i].describe():"default"===i?s.isRef(this._flags[i])?t.flags[i]=this._flags[i].toString():"function"==typeof this._flags[i]?t.flags[i]={description:this._flags[i].description,function:this._flags[i]}:t.flags[i]=this._flags[i]:"lazy"===i||"label"===i||(t.flags[i]=this._flags[i])}}else t.flags=this._flags;this._settings&&(t.options=a.clone(this._settings)),this._baseType&&(t.base=this._baseType.describe()),this._description&&(t.description=this._description),this._notes.length&&(t.notes=this._notes),this._tags.length&&(t.tags=this._tags),this._meta.length&&(t.meta=this._meta),this._examples.length&&(t.examples=this._examples),this._unit&&(t.unit=this._unit);var o=this._valids.values();o.length&&(t.valids=o.map(function(e){return s.isRef(e)?e.toString():e}));var l=this._invalids.values();l.length&&(t.invalids=l.map(function(e){return s.isRef(e)?e.toString():e})),t.rules=[];for(var c=0;c<this._tests.length;++c){var u=this._tests[c],f={name:u.name};void 0!==u.arg&&(f.arg=s.isRef(u.arg)?u.arg.toString():u.arg);var h=u.options;if(h){if(h.hasRef){f.arg={};for(var p=Object.keys(u.arg),d=0;d<p.length;++d){var v=p[d],y=u.arg[v];f.arg[v]=s.isRef(y)?y.toString():y}}"string"==typeof h.description?f.description=h.description:"function"==typeof h.description&&(f.description=h.description(f.arg))}t.rules.push(f)}t.rules.length||delete t.rules;var m=this._getLabel();return m&&(t.label=m),t}},{key:"label",value:function(e){a.assert(e&&"string"==typeof e,"Label name must be a non-empty string");var t=this.clone();return t._flags.label=e,t}},{key:"_getLabel",value:function(e){return this._flags.label||e}},{key:"schemaType",get:function(){return this._type}}]),e}(),f.Any.prototype.isImmutable=!0,f.Any.prototype.only=f.Any.prototype.equal=f.Any.prototype.valid,f.Any.prototype.disallow=f.Any.prototype.not=f.Any.prototype.invalid,f.Any.prototype.exist=f.Any.prototype.required,f._try=function(e,t){var r=void 0,n=void 0;try{n=e.apply(null,t)}catch(e){r=e}return{value:n,error:r}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(0),a=r(1);t.schema=function(e,t){return void 0!==t&&null!==t&&"object"===(void 0===t?"undefined":n(t))?t.isJoi?t:Array.isArray(t)?e.alternatives().try(t):t instanceof RegExp?e.string().regex(t):t instanceof Date?e.date().valid(t):e.object().keys(t):"string"==typeof t?e.string().valid(t):"number"==typeof t?e.number().valid(t):"boolean"==typeof t?e.boolean().valid(t):a.isRef(t)?e.valid(t):(i.assert(null===t,"Invalid schema content:",t),e.valid(null))},t.ref=function(e){return a.isRef(e)?e:a.create(e)}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=r(0),o=r(25),s={annotations:Symbol("joi-annotations"),stringify:function(e,r){var n=void 0===e?"undefined":i(e);if(null===e)return"null";if("string"===n)return e;if(e instanceof t.Err||"function"===n||"symbol"===n)return e.toString();if("object"===n){if(Array.isArray(e)){for(var a="",o=0;o<e.length;++o)a=a+(a.length?", ":"")+s.stringify(e[o],r);return r?"["+a+"]":a}return e.toString()}return JSON.stringify(e)}};t.Err=function(){function e(t,r,n,i,a,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isJoi=!0,this.type=t,this.context=r||{},this.context.key=n.path[n.path.length-1],this.context.label=n.key,this.path=n.path,this.options=i,this.flags=a,this.message=s,this.template=l;var c=this.options.language;this.flags.label?this.context.label=this.flags.label:!c||""!==this.context.label&&null!==this.context.label||(this.context.label=c.root||o.errors.root)}return n(e,[{key:"toString",value:function(){var e=this;if(this.message)return this.message;var t=void 0;this.template&&(t=this.template);var r=this.options.language;if(void 0===(t=t||a.reach(r,this.type)||a.reach(o.errors,this.type)))return'Error code "'+this.type+'" is not defined, your custom type is missing the correct language definition';var n=a.reach(r,"messages.wrapArrays");if("boolean"!=typeof n&&(n=o.errors.messages.wrapArrays),null===t){var i=s.stringify(this.context.reason,n);return n?i.slice(1,-1):i}var l=/\{\{\!?label\}\}/.test(t),c=t.length>2&&"!"===t[0]&&"!"===t[1];if(c&&(t=t.slice(2)),!l&&!c){var u=a.reach(r,"key");t="string"==typeof u?u+t:a.reach(o.errors,"key")+t}return t.replace(/\{\{(\!?)([^}]+)\}\}/g,function(t,r,i){var o=a.reach(e.context,i),l=s.stringify(o,n);return r&&e.options.escapeHtml?a.escapeHtml(l):l})}}]),e}(),t.create=function(e,r,n,i,a,o,s){return new t.Err(e,r,n,i,a,o,s)},t.process=function(e,t){if(!e||!e.length)return null;var r="",n=[],i=function e(t,i){for(var a=0;a<t.length;++a){var o=t[a];if(o instanceof Error)return o;if(o.flags.error&&"function"!=typeof o.flags.error)return o.flags.error;var s=void 0;if(void 0===i&&(s=o.toString(),r=r+(r?". ":"")+s),o.context.reason&&o.context.reason.length){var l=e(o.context.reason,o.path);if(l)return l}else n.push({message:s||o.toString(),path:o.path,type:o.type,context:o.context})}}(e);if(i)return i;var a=new Error(r);return a.isJoi=!0,a.name="ValidationError",a.details=n,a._object=t,a.annotate=s.annotate,a},s.safeStringify=function(e,t){return JSON.stringify(e,s.serializer(),t)},s.serializer=function(){var e=[],t=[];return function(r,n){if(t.length>0){var a=t.indexOf(this);~a?(t.length=a+1,e.length=a+1,e[a]=r):(t.push(this),e.push(r)),~t.indexOf(n)&&(n=function(r,n){return t[0]===n?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(n)).join(".")+"]"}.call(this,r,n))}else t.push(n);if(n){var o=n[s.annotations];if(o){if(Array.isArray(n)){for(var l=[],c=0;c<n.length;++c)o.errors[c]&&l.push("_$idx$_"+o.errors[c].sort().join(", ")+"_$end$_"),l.push(n[c]);n=l}else{for(var u=Object.keys(o.errors),f=0;f<u.length;++f){var h=u[f];n[h+"_$key$_"+o.errors[h].sort().join(", ")+"_$end$_"]=n[h],n[h]=void 0}for(var p=Object.keys(o.missing),d=0;d<p.length;++d){var v=p[d];n["_$miss$_"+v+"|"+o.missing[v]+"_$end$_"]="__missing__"}}return n}}return n===1/0||n===-1/0||Number.isNaN(n)||"function"==typeof n||"symbol"===(void 0===n?"undefined":i(n))?"["+n.toString()+"]":n}},s.annotate=function(e){var t=e?"":"[31m",r=e?"":"[41m",n=e?"":"[0m";if("object"!==i(this._object))return this.details[0].message;for(var o=a.clone(this._object||{}),l=this.details.length-1;l>=0;--l)for(var c=l+1,u=this.details[l],f=u.path,h=o,p=0;;++p){var d=f[p];if(h.isImmutable&&(h=h.clone()),!(p+1<f.length&&h[d]&&"string"!=typeof h[d])){var v=h[s.annotations]=h[s.annotations]||{errors:{},missing:{}},y=h[d],m=d||u.context.label;void 0!==y?(v.errors[m]=v.errors[m]||[],v.errors[m].push(c)):v.missing[m]=c;break}h=h[d]}var g=/_\$key\$_([, \d]+)_\$end\$_\"/g,b=/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,_=/\s*\"_\$idx\$_([, \d]+)_\$end\$_\",?\n(.*)/g,w=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)\]"/g,k=s.safeStringify(o,2).replace(g,function(e,r){return'" '+t+"["+r+"]"+n}).replace(b,function(e,i,a){return r+'"'+i+'"'+n+t+" ["+a+"]: -- missing --"+n}).replace(_,function(e,r,i){return"\n"+i+" "+t+"["+r+"]"+n}).replace(w,function(e,t){return t});k=k+"\n"+t;for(var x=0;x<this.details.length;++x){k=k+"\n["+(x+1)+"] "+this.details[x].message}return k+=n}},function(e,t,r){"use strict";var n={rfc3986:{},generate:function(){var e="|";n.rfc3986.ipv4Cidr="[0-9]|[1-2][0-9]|3[0-2]",n.rfc3986.ipv6Cidr="(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])";var t="a-zA-Z0-9-\\._~",r="!\\$&'\\(\\)\\*\\+,;=",i=t+"%0-9A-Fa-f"+r+":@",a="["+i+"]",o="(?:0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])";n.rfc3986.IPv4address="(?:"+o+"\\.){3}"+o;var s="[0-9A-Fa-f]{1,4}",l="(?:"+s+":"+s+"|"+n.rfc3986.IPv4address+")",c="(?:"+s+":){6}"+l,u="::(?:"+s+":){5}"+l,f="(?:"+s+")?::(?:"+s+":){4}"+l,h="(?:(?:"+s+":){0,1}"+s+")?::(?:"+s+":){3}"+l,p="(?:(?:"+s+":){0,2}"+s+")?::(?:"+s+":){2}"+l,d="(?:(?:"+s+":){0,3}"+s+")?::"+s+":"+l,v="(?:(?:"+s+":){0,4}"+s+")?::"+l;n.rfc3986.IPv6address="(?:"+c+e+u+e+f+e+h+e+p+e+d+e+v+e+"(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}"+e+"(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)",n.rfc3986.IPvFuture="v[0-9A-Fa-f]+\\.["+t+r+":]+",n.rfc3986.scheme="[a-zA-Z][a-zA-Z0-9+-\\.]*";var y="(?:[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:]*@)?"+("(?:"+("\\[(?:"+n.rfc3986.IPv6address+e+n.rfc3986.IPvFuture+")\\]")+e+n.rfc3986.IPv4address+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=]{0,255})")+"(?::[0-9]*)?",m=a+"+",g="(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",b="\\/(?:"+m+g+")?";n.rfc3986.hierPart="(?:(?:\\/\\/"+y+g+")"+e+b+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*)",n.rfc3986.relativeRef="(?:(?:\\/\\/"+y+g+")"+e+b+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*"+e+")",n.rfc3986.query="["+i+"\\/\\?]*(?=#|$)",n.rfc3986.fragment="["+i+"\\/\\?]*"}};n.generate(),e.exports=n.rfc3986},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(0),o=r(19),s=r(2),l=r(4),c=r(3),u={};u.Object=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="object",e._inner.children=null,e._inner.renames=[],e._inner.dependencies=[],e._inner.patterns=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),i(t,[{key:"_base",value:function(e,t,r){var i=e,o=[],s=function(){return{value:i,errors:o.length?o:null}};"string"==typeof e&&r.convert&&(e=u.safeParse(e));var c=this._flags.func?"function":"object";if(!e||(void 0===e?"undefined":n(e))!==c||Array.isArray(e))return o.push(this.createError(c+".base",null,t,r)),s();if(!(this._inner.renames.length||this._inner.dependencies.length||this._inner.children||this._inner.patterns.length))return i=e,s();if(i===e){"object"===c?i=Object.create(Object.getPrototypeOf(e)):(i=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)}).prototype=a.clone(e.prototype);for(var f=Object.keys(e),h=0;h<f.length;++h)i[f[h]]=e[f[h]]}else i=e;for(var p={},d=0;d<this._inner.renames.length;++d){var v=this._inner.renames[d];if(v.isRegExp){for(var y=Object.keys(i),m=[],g=0;g<y.length;++g)v.from.test(y[g])&&m.push(y[g]);var b=m.every(function(e){return void 0===i[e]});if(v.options.ignoreUndefined&&b)continue;if(!v.options.multiple&&p[v.to]&&(o.push(this.createError("object.rename.regex.multiple",{from:m,to:v.to},t,r)),r.abortEarly))return s();if(Object.prototype.hasOwnProperty.call(i,v.to)&&!v.options.override&&!p[v.to]&&(o.push(this.createError("object.rename.regex.override",{from:m,to:v.to},t,r)),r.abortEarly))return s();if(b?delete i[v.to]:i[v.to]=i[m[m.length-1]],p[v.to]=!0,!v.options.alias)for(var _=0;_<m.length;++_)delete i[m[_]]}else{if(v.options.ignoreUndefined&&void 0===i[v.from])continue;if(!v.options.multiple&&p[v.to]&&(o.push(this.createError("object.rename.multiple",{from:v.from,to:v.to},t,r)),r.abortEarly))return s();if(Object.prototype.hasOwnProperty.call(i,v.to)&&!v.options.override&&!p[v.to]&&(o.push(this.createError("object.rename.override",{from:v.from,to:v.to},t,r)),r.abortEarly))return s();void 0===i[v.from]?delete i[v.to]:i[v.to]=i[v.from],p[v.to]=!0,v.options.alias||delete i[v.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return s();var w=a.mapToObject(Object.keys(i));if(this._inner.children){for(var k=[],x=0;x<this._inner.children.length;++x){var E=this._inner.children[x],j=E.key,O=i[j];delete w[j];var S={key:j,path:t.path.concat(j),parent:i,reference:t.reference},A=E.schema._validate(O,S,r);if(A.errors){if(o.push(this.createError("object.child",{key:j,child:E.schema._getLabel(j),reason:A.errors},S,r)),r.abortEarly)return s()}else E.schema._flags.strip||void 0===A.value&&A.value!==O?(k.push(j),i[j]=A.finalValue):void 0!==A.value&&(i[j]=A.value)}for(var C=0;C<k.length;++C)delete i[k[C]]}var P=Object.keys(w);if(P.length&&this._inner.patterns.length){for(var T=0;T<P.length;++T)for(var D=P[T],L={key:D,path:t.path.concat(D),parent:i,reference:t.reference},F=i[D],R=0;R<this._inner.patterns.length;++R){var I=this._inner.patterns[R];if(I.regex.test(D)){delete w[D];var N=I.rule._validate(F,L,r);if(N.errors&&(o.push(this.createError("object.child",{key:D,child:I.rule._getLabel(D),reason:N.errors},L,r)),r.abortEarly))return s();i[D]=N.value}}P=Object.keys(w)}if((this._inner.children||this._inner.patterns.length)&&P.length){if(r.stripUnknown&&!0!==this._flags.allowUnknown||r.skipFunctions){for(var q=!!r.stripUnknown&&(!0===r.stripUnknown||!!r.stripUnknown.objects),W=0;W<P.length;++W){var z=P[W];q?(delete i[z],delete w[z]):"function"==typeof i[z]&&delete w[z]}P=Object.keys(w)}if(P.length&&(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!r.allowUnknown))for(var $=0;$<P.length;++$){var U=P[$];o.push(this.createError("object.allowUnknown",{child:U},{key:U,path:t.path.concat(U)},r,{}))}}for(var J=0;J<this._inner.dependencies.length;++J){var M=this._inner.dependencies[J],B=u[M.type].call(this,null!==M.key&&i[M.key],M.peers,i,{key:M.key,path:null===M.key?t.path:t.path.concat(M.key)},r);if(B instanceof l.Err&&(o.push(B),r.abortEarly))return s()}return s()}},{key:"keys",value:function(e){a.assert(null===e||void 0===e||"object"===(void 0===e?"undefined":n(e)),"Object schema must be a valid object"),a.assert(!(e&&e instanceof s),"Object schema cannot be a joi schema");var t=this.clone();if(!e)return t._inner.children=null,t;var r=Object.keys(e);if(!r.length)return t._inner.children=[],t;var i=new o;if(t._inner.children)for(var l=0;l<t._inner.children.length;++l){var u=t._inner.children[l];r.includes(u.key)||i.add(u,{after:u._refs,group:u.key})}for(var f=0;f<r.length;++f){var h=r[f],p=e[h];try{var d=c.schema(this._currentJoi,p);i.add({key:h,schema:d},{after:d._refs,group:h})}catch(e){throw e.hasOwnProperty("path")?e.path=h+"."+e.path:e.path=h,e}}return t._inner.children=i.nodes,t}},{key:"append",value:function(e){return null===e||void 0===e||0===Object.keys(e).length?this:this.keys(e)}},{key:"unknown",value:function(e){var t=!1!==e;if(this._flags.allowUnknown===t)return this;var r=this.clone();return r._flags.allowUnknown=t,r}},{key:"length",value:function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,r,n){return Object.keys(t).length===e?t:this.createError("object.length",{limit:e},r,n)})}},{key:"min",value:function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,r,n){return Object.keys(t).length>=e?t:this.createError("object.min",{limit:e},r,n)})}},{key:"max",value:function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,r,n){return Object.keys(t).length<=e?t:this.createError("object.max",{limit:e},r,n)})}},{key:"pattern",value:function(e,t){a.assert(e instanceof RegExp,"Invalid regular expression"),a.assert(void 0!==t,"Invalid rule"),e=new RegExp(e.source,e.ignoreCase?"i":void 0);try{t=c.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}var r=this.clone();return r._inner.patterns.push({regex:e,rule:t}),r}},{key:"schema",value:function(){return this._test("schema",null,function(e,t,r){return e instanceof s?e:this.createError("object.schema",null,t,r)})}},{key:"with",value:function(e,t){return a.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("with",e,t)}},{key:"without",value:function(e,t){return a.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("without",e,t)}},{key:"xor",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=a.flatten(t),this._dependency("xor",null,t)}},{key:"or",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=a.flatten(t),this._dependency("or",null,t)}},{key:"and",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=a.flatten(t),this._dependency("and",null,t)}},{key:"nand",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=a.flatten(t),this._dependency("nand",null,t)}},{key:"requiredKeys",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=a.flatten(t),this.applyFunctionToChildren(t,"required")}},{key:"optionalKeys",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=a.flatten(t),this.applyFunctionToChildren(t,"optional")}},{key:"forbiddenKeys",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=a.flatten(t),this.applyFunctionToChildren(t,"forbidden")}},{key:"rename",value:function(e,t,r){a.assert("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),a.assert("string"==typeof t,"Rename missing the to argument"),a.assert(t!==e,"Cannot rename key to same name:",e);for(var n=0;n<this._inner.renames.length;++n)a.assert(this._inner.renames[n].from!==e,"Cannot rename the same key multiple times");var i=this.clone();return i._inner.renames.push({from:e,to:t,options:a.applyToDefaults(u.renameDefaults,r||{}),isRegExp:e instanceof RegExp}),i}},{key:"applyFunctionToChildren",value:function(e,t,r,n){e=[].concat(e),a.assert(e.length>0,"expected at least one children");var i=u.groupChildren(e),o=void 0;if(""in i?(o=this[t].apply(this,r),delete i[""]):o=this.clone(),o._inner.children){n=n?n+".":"";for(var s=0;s<o._inner.children.length;++s){var l=o._inner.children[s],c=i[l.key];c&&(o._inner.children[s]={key:l.key,_refs:l._refs,schema:l.schema.applyFunctionToChildren(c,t,r,n+l.key)},delete i[l.key])}}var f=Object.keys(i);return a.assert(0===f.length,"unknown key(s)",f.join(", ")),o}},{key:"_dependency",value:function(e,t,r){r=[].concat(r);for(var n=0;n<r.length;++n)a.assert("string"==typeof r[n],e,"peers must be a string or array of strings");var i=this.clone();return i._inner.dependencies.push({type:e,key:t,peers:r}),i}},{key:"describe",value:function(e){var t=s.prototype.describe.call(this);if(t.rules)for(var r=0;r<t.rules.length;++r){var i=t.rules[r];i.arg&&"object"===n(i.arg)&&i.arg.schema&&i.arg.ref&&(i.arg={schema:i.arg.schema.describe(),ref:i.arg.ref.toString()})}if(this._inner.children&&!e){t.children={};for(var o=0;o<this._inner.children.length;++o){var l=this._inner.children[o];t.children[l.key]=l.schema.describe()}}if(this._inner.dependencies.length&&(t.dependencies=a.clone(this._inner.dependencies)),this._inner.patterns.length){t.patterns=[];for(var c=0;c<this._inner.patterns.length;++c){var u=this._inner.patterns[c];t.patterns.push({regex:u.regex.toString(),rule:u.rule.describe()})}}return this._inner.renames.length>0&&(t.renames=a.clone(this._inner.renames)),t}},{key:"assert",value:function(e,t,r){e=c.ref(e),a.assert(e.isContext||e.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),r=r||"pass the assertion test";try{t=c.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}var n=e.path[e.path.length-1],i=e.path.join(".");return this._test("assert",{schema:t,ref:e},function(o,s,l){if(!t._validate(e(o),null,l,o).errors)return o;var c=a.merge({},s);return c.key=n,c.path=e.path,this.createError("object.assert",{ref:i,message:r},c,l)})}},{key:"type",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name;a.assert("function"==typeof e,"type must be a constructor function");var r={name:t,ctor:e};return this._test("type",r,function(t,n,i){return t instanceof e?t:this.createError("object.type",{type:r.name},n,i)})}}]),t}(),u.safeParse=function(e){try{return JSON.parse(e)}catch(e){}return e},u.renameDefaults={alias:!1,multiple:!1,override:!1},u.groupChildren=function(e){e.sort();for(var t={},r=0;r<e.length;++r){var n=e[r];a.assert("string"==typeof n,"children must be strings");var i=n.split(".")[0];(t[i]=t[i]||[]).push(n.substring(i.length+1))}return t},u.keysToLabels=function(e,t){var r=e._inner.children;if(!r)return t;var n=function(e){var t=r.find(function(t){return t.key===e});return t?t.schema._getLabel(e):e};return Array.isArray(t)?t.map(n):n(t)},u.with=function(e,t,r,n,i){if(void 0===e)return e;for(var a=0;a<t.length;++a){var o=t[a];if(!Object.prototype.hasOwnProperty.call(r,o)||void 0===r[o])return this.createError("object.with",{main:n.key,mainWithLabel:u.keysToLabels(this,n.key),peer:o,peerWithLabel:u.keysToLabels(this,o)},n,i)}return e},u.without=function(e,t,r,n,i){if(void 0===e)return e;for(var a=0;a<t.length;++a){var o=t[a];if(Object.prototype.hasOwnProperty.call(r,o)&&void 0!==r[o])return this.createError("object.without",{main:n.key,mainWithLabel:u.keysToLabels(this,n.key),peer:o,peerWithLabel:u.keysToLabels(this,o)},n,i)}return e},u.xor=function(e,t,r,n,i){for(var a=[],o=0;o<t.length;++o){var s=t[o];Object.prototype.hasOwnProperty.call(r,s)&&void 0!==r[s]&&a.push(s)}if(1===a.length)return e;var l={peers:t,peersWithLabels:u.keysToLabels(this,t)};return 0===a.length?this.createError("object.missing",l,n,i):this.createError("object.xor",l,n,i)},u.or=function(e,t,r,n,i){for(var a=0;a<t.length;++a){var o=t[a];if(Object.prototype.hasOwnProperty.call(r,o)&&void 0!==r[o])return e}return this.createError("object.missing",{peers:t,peersWithLabels:u.keysToLabels(this,t)},n,i)},u.and=function(e,t,r,n,i){for(var a=[],o=[],s=t.length,l=0;l<s;++l){var c=t[l];Object.prototype.hasOwnProperty.call(r,c)&&void 0!==r[c]?o.push(c):a.push(c)}if(!(a.length===s||o.length===s))return this.createError("object.and",{present:o,presentWithLabels:u.keysToLabels(this,o),missing:a,missingWithLabels:u.keysToLabels(this,a)},n,i)},u.nand=function(e,t,r,n,i){for(var o=[],s=0;s<t.length;++s){var l=t[s];Object.prototype.hasOwnProperty.call(r,l)&&void 0!==r[l]&&o.push(l)}var c=a.clone(t),f=c.splice(0,1)[0];return o.length===t.length?this.createError("object.nand",{main:f,mainWithLabel:u.keysToLabels(this,f),peers:c,peersWithLabels:u.keysToLabels(this,c)},n,i):null},e.exports=new u.Object},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i,a=r(2),o=r(1),s=r(0),l={};l.isoDate=/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/,l.invalidDate=new Date(""),l.isIsoDate=(i=l.isoDate.toString(),function(e){return e&&e.toString()===i}),l.Date=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="date",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a),n(t,[{key:"_base",value:function(e,t,r){var n={value:r.convert&&l.Date.toDate(e,this._flags.format,this._flags.timestamp,this._flags.multiplier)||e};if(n.value instanceof Date&&!isNaN(n.value.getTime()))n.errors=null;else if(r.convert){var i=void 0;i=l.isIsoDate(this._flags.format)?"isoDate":this._flags.timestamp?"timestamp."+this._flags.timestamp:"base",n.errors=this.createError("date."+i,null,t,r)}else n.errors=this.createError("date.strict",null,t,r);return n}},{key:"iso",value:function(){if(this._flags.format===l.isoDate)return this;var e=this.clone();return e._flags.format=l.isoDate,e}},{key:"timestamp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=["javascript","unix"];if(s.assert(t.includes(e),'"type" must be one of "'+t.join('", "')+'"'),this._flags.timestamp===e)return this;var r=this.clone();return r._flags.timestamp=e,r._flags.multiplier="unix"===e?1e3:1,r}},{key:"_isIsoDate",value:function(e){return l.isoDate.test(e)}}],[{key:"toDate",value:function(e,t,r,n){if(e instanceof Date)return e;if("string"==typeof e||"number"==typeof e&&!isNaN(e)&&isFinite(e)){"string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e));var i=void 0;if(i=t&&l.isIsoDate(t)?t.test(e)?new Date(e):l.invalidDate:r&&n?/^\s*$/.test(e)?l.invalidDate:new Date(e*n):new Date(e),!isNaN(i.getTime()))return i}return null}}]),t}(),l.compare=function(e,t){return function(r){var n="now"===r,i=o.isRef(r);return n||i||(r=l.Date.toDate(r)),s.assert(r,"Invalid date format"),this._test(e,r,function(a,o,s){var c=void 0;if(n)c=Date.now();else if(i){if(!(c=l.Date.toDate(r(o.reference||o.parent,s))))return this.createError("date.ref",{ref:r.key},o,s);c=c.getTime()}else c=r.getTime();return t(a.getTime(),c)?a:this.createError("date."+e,{limit:new Date(c)},o,s)})}},l.Date.prototype.min=l.compare("min",function(e,t){return e>=t}),l.Date.prototype.max=l.compare("max",function(e,t){return e<=t}),e.exports=new l.Date},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(0),o=r(2),s=r(3),l=r(1),c={};c.Alternatives=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="alternatives",e._invalids.remove(null),e._inner.matches=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"_base",value:function(e,t,r){for(var n=[],i=this._inner.matches.length,a=this._baseType,o=0;o<i;++o){var s=this._inner.matches[o];if(s.schema){var l=s.schema._validate(e,t,r);if(!l.errors)return l;n=n.concat(l.errors)}else{var c=s.peek||s.is,u=s.is?s.ref(t.reference||t.parent,r):e;if(c._validate(u,null,r,t.parent).errors){if(s.otherwise)return s.otherwise._validate(e,t,r)}else if(s.then)return s.then._validate(e,t,r);if(o===i-1&&a)return a._validate(e,t,r)}}return n.length?{errors:this.createError("alternatives.child",{reason:n},t,r)}:{errors:this.createError("alternatives.base",null,t,r)}}},{key:"try",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t=a.flatten(t),a.assert(t.length,"Cannot add other alternatives without at least one schema");for(var n=this.clone(),i=0;i<t.length;++i){var o=s.schema(this._currentJoi,t[i]);o._refs.length&&(n._refs=n._refs.concat(o._refs)),n._inner.matches.push({schema:o})}return n}},{key:"when",value:function(e,t){var r=!1;a.assert(l.isRef(e)||"string"==typeof e||(r=e instanceof o),"Invalid condition:",e),a.assert(t,"Missing options"),a.assert("object"===(void 0===t?"undefined":n(t)),"Invalid options"),r?a.assert(!t.hasOwnProperty("is"),'"is" can not be used with a schema condition'):a.assert(t.hasOwnProperty("is"),'Missing "is" directive'),a.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var i=this.clone(),c=void 0;r||(c=s.schema(this._currentJoi,t.is),null!==t.is&&(l.isRef(t.is)||t.is instanceof o)||(c=c.required()));var u={ref:r?null:s.ref(e),peek:r?e:null,is:c,then:void 0!==t.then?s.schema(this._currentJoi,t.then):void 0,otherwise:void 0!==t.otherwise?s.schema(this._currentJoi,t.otherwise):void 0};return i._baseType&&(u.then=u.then&&i._baseType.concat(u.then),u.otherwise=u.otherwise&&i._baseType.concat(u.otherwise)),r||(l.push(i._refs,u.ref),i._refs=i._refs.concat(u.is._refs)),u.then&&u.then._refs&&(i._refs=i._refs.concat(u.then._refs)),u.otherwise&&u.otherwise._refs&&(i._refs=i._refs.concat(u.otherwise._refs)),i._inner.matches.push(u),i}},{key:"describe",value:function(){for(var e=o.prototype.describe.call(this),t=[],r=0;r<this._inner.matches.length;++r){var n=this._inner.matches[r];if(n.schema)t.push(n.schema.describe());else{var i=n.is?{ref:n.ref.toString(),is:n.is.describe()}:{peek:n.peek.describe()};n.then&&(i.then=n.then.describe()),n.otherwise&&(i.otherwise=n.otherwise.describe()),t.push(i)}}return e.alternatives=t,e}}]),t}(),e.exports=new c.Alternatives},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(1);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._set=[]}return i(e,[{key:"add",value:function(e,t){if(a.isRef(e)||!this.has(e,null,null,!1))return void 0!==t&&a.push(t,e),this._set.push(e),this}},{key:"merge",value:function(e,t){for(var r=0;r<e._set.length;++r)this.add(e._set[r]);for(var n=0;n<t._set.length;++n)this.remove(t._set[n]);return this}},{key:"remove",value:function(e){return this._set=this._set.filter(function(t){return e!==t}),this}},{key:"has",value:function(e,t,r,i){for(var o=0;o<this._set.length;++o){var s=this._set[o];t&&a.isRef(s)&&(s=s(t.reference||t.parent,r)),Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;++l){var c=s[l];if((void 0===e?"undefined":n(e))===(void 0===c?"undefined":n(c))&&(e===c||e instanceof Date&&c instanceof Date&&e.getTime()===c.getTime()||i&&"string"==typeof e&&e.toLowerCase()===c.toLowerCase()))return!0}}return!1}},{key:"values",value:function(e){if(e&&e.stripUndefined){for(var t=[],r=0;r<this._set.length;++r){var n=this._set[r];void 0!==n&&t.push(n)}return t}return this._set.slice()}},{key:"slice",value:function(){var t=new e;return t._set=this._set.slice(),t}},{key:"concat",value:function(t){var r=new e;return r._set=this._set.concat(t._set),r}}]),e}()},function(e,t,r){"use strict";var n=r(0);t.concat=function(e,t){if(!t)return e;for(var r=Object.assign({},e),i=Object.keys(t),a=0;a<i.length;++a){var o=i[a];"language"===o&&r.hasOwnProperty(o)?r[o]=n.applyToDefaults(r[o],t[o]):r[o]=t[o]}return r}},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(3),o=r(4),s=r(23),l=r(1),c=r(10),u={alternatives:r(8),array:r(22),boolean:r(21),date:r(7),func:r(20),number:r(18),object:r(6),string:r(17),applyDefaults:function(e){return n.assert(this,"Must be invoked on a Joi instance."),this._defaults&&(e=this._defaults(e)),e._currentJoi=this,e}};u.root=function(){var e=new i,t=e.clone();return i.prototype._currentJoi=t,t._currentJoi=t,t.any=function(){return n.assert(0===arguments.length,"Joi.any() does not allow arguments."),u.applyDefaults.call(this,e)},t.alternatives=t.alt=function(){for(var e=u.applyDefaults.call(this,u.alternatives),t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.length?e.try.apply(e,r):e},t.array=function(){return n.assert(0===arguments.length,"Joi.array() does not allow arguments."),u.applyDefaults.call(this,u.array)},t.boolean=t.bool=function(){return n.assert(0===arguments.length,"Joi.boolean() does not allow arguments."),u.applyDefaults.call(this,u.boolean)},t.date=function(){return n.assert(0===arguments.length,"Joi.date() does not allow arguments."),u.applyDefaults.call(this,u.date)},t.func=function(){return n.assert(0===arguments.length,"Joi.func() does not allow arguments."),u.applyDefaults.call(this,u.func)},t.number=function(){return n.assert(0===arguments.length,"Joi.number() does not allow arguments."),u.applyDefaults.call(this,u.number)},t.object=function(){var e=u.applyDefaults.call(this,u.object);return arguments.length?e.keys.apply(e,arguments):e},t.string=function(){return n.assert(0===arguments.length,"Joi.string() does not allow arguments."),u.applyDefaults.call(this,u.string)},t.ref=function(){return l.create.apply(l,arguments)},t.isRef=function(e){return l.isRef(e)},t.validate=function(r){var n,i=(n=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=n?void 0:arguments[n]),a="function"==typeof i?i:null,o=(arguments.length<=1?0:arguments.length-1)-(a?1:0);if(0===o)return e.validate(r,a);var s=2===o?arguments.length<=2?void 0:arguments[2]:{};return t.compile(arguments.length<=1?void 0:arguments[1])._validateWithOptions(r,s,a)},t.describe=function(){return(arguments.length?t.compile(arguments.length<=0?void 0:arguments[0]):e).describe()},t.compile=function(e){try{return a.schema(this,e)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}},t.assert=function(e,r,n){t.attempt(e,r,n)},t.attempt=function(e,r,n){var i=t.validate(e,r),a=i.error;if(a){if(!n)throw"function"==typeof a.annotate&&(a.message=a.annotate()),a;if(!(n instanceof Error))throw"function"==typeof a.annotate&&(a.message=n+" "+a.annotate()),a;throw n}return i.value},t.reach=function(e,t){n.assert(e&&e instanceof i,"you must provide a joi schema"),n.assert(Array.isArray(t)||"string"==typeof t,"path must be a string or an array of strings");return function e(t,r){if(!r.length)return t;var n=t._inner.children;if(n)for(var i=r.shift(),a=0;a<n.length;++a){var o=n[a];if(o.key===i)return e(o.schema,r)}}(e,"string"==typeof t?t.split("."):t.slice())},t.lazy=function(e){return s.set(e)},t.defaults=function(e){var t=this;n.assert("function"==typeof e,"Defaults must be a function");var r=Object.create(this.any());return r=e(r),n.assert(r&&r instanceof this.constructor,"defaults() must return a schema"),Object.assign(r,this,r.clone()),r._defaults=function(r){return t._defaults&&(r=t._defaults(r),n.assert(r instanceof t.constructor,"defaults() must return a schema")),r=e(r),n.assert(r instanceof t.constructor,"defaults() must return a schema"),r},r},t.extend=function(){for(var e=this,r=arguments.length,s=Array(r),f=0;f<r;f++)s[f]=arguments[f];var h=n.flatten(s);n.assert(h.length>0,"You need to provide at least one extension"),this.assert(h,t.extensionsSchema);var p=Object.create(this.any());Object.assign(p,this);for(var d=function(r){var s=h[r];"function"==typeof s&&(s=s(p)),e.assert(s,t.extensionSchema);var f=(s.base||e.any()).clone(),d=f.constructor,v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e,r,n,i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.base&&Object.assign(i,f),i._type=s.name,s.language&&(i._settings=c.concat(i._settings,{language:(e={},r=s.name,n=s.language,r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e)})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d),t}();if(s.coerce&&(v.prototype._coerce=function(e,t,r){if(d.prototype._coerce){var n=d.prototype._coerce.call(this,e,t,r);if(n.errors)return n;e=n.value}var i=s.coerce.call(this,e,t,r);return i instanceof o.Err?{value:e,errors:i}:{value:i}}),s.pre&&(v.prototype._base=function(e,t,r){if(d.prototype._base){var n=d.prototype._base.call(this,e,t,r);if(n.errors)return n;e=n.value}var i=s.pre.call(this,e,t,r);return i instanceof o.Err?{value:e,errors:i}:{value:i}}),s.rules)for(var y=function(t){var r=s.rules[t],o=r.params?r.params instanceof i?r.params._inner.children.map(function(e){return e.key}):Object.keys(r.params):[],c=r.params?a.schema(e,r.params):null;v.prototype[r.name]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(t.length>o.length)throw new Error("Unexpected number of arguments");for(var s=!1,u={},f=0;f<o.length;++f)u[o[f]]=t[f],!s&&l.isRef(t[f])&&(s=!0);c&&(u=p.attempt(u,c));var h=void 0;if(r.validate){h=this._test(r.name,u,function(e,t,n){return r.validate.call(this,u,e,t,n)},{description:r.description,hasRef:s})}else h=this.clone();if(r.setup){var d=r.setup.call(h,u);void 0!==d&&(n.assert(d instanceof i,"Setup of extension Joi."+this._type+"()."+r.name+"() must return undefined or a Joi object"),h=d)}return h}},m=0;m<s.rules.length;++m)y(m);s.describe&&(v.prototype.describe=function(){var e=d.prototype.describe.call(this);return s.describe.call(this,e)});var g=new v;p[s.name]=function(){return u.applyDefaults.call(this,g)}},v=0;v<h.length;++v)d(v);return p},t.extensionSchema=u.object.keys({base:u.object.type(i,"Joi object"),name:u.string.required(),coerce:u.func.arity(3),pre:u.func.arity(3),language:u.object,describe:u.func.arity(1),rules:u.array.items(u.object.keys({name:u.string.required(),setup:u.func.arity(1),validate:u.func.arity(4),params:[u.object.pattern(/.*/,u.object.type(i,"Joi object")),u.object.type(u.object.constructor,"Joi object")],description:[u.string,u.func.arity(1)]}).or("setup","validate"))}).strict(),t.extensionsSchema=u.array.items([u.object,u.func.arity(1)]).strict(),t.version=r(12).version,t},e.exports=u.root()},function(e){e.exports={name:"joi",description:"Object schema validation",version:"13.1.2",homepage:"https://github.com/hapijs/joi",repository:"git://github.com/hapijs/joi",main:"dist/index.js",keywords:["hapi","schema","validation"],engines:{node:">=8.9.0"},dependencies:{isemail:"3.x.x","project-utils":"https://github.com/wohlgemuth-team/project-utils.git",topo:"3.x.x"},devDependencies:{"babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-preset-env":"^1.7.0",chalk:"^2.4.1",code:"5.x.x",hapitoc:"1.x.x",lab:"15.x.x","react-dev-utils":"^5.0.1",webpack:"^4.11.0"},scripts:{test:"lab -t 100 -a code -L","test-debug":"lab -a code","test-cov-html":"lab -r html -o coverage.html -a code",toc:"hapitoc",version:"npm run toc && git add API.md README.md",build:"node scripts/build.js"},license:"BSD-3-Clause"}},function(e,t,r){"use strict";var n=2147483647,i=/^xn--/,a=/[^\0-\x7E]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},l=Math.floor,c=String.fromCharCode;function u(e){throw new RangeError(s[e])}function f(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(o,".")).split("."),t).join(".");return n+i}function h(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),r--)}else t.push(i)}return t}var p=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},d=function(e,t,r){var n=0;for(e=r?l(e/700):e>>1,e+=l(e/t);e>455;n+=36)e=l(e/35);return l(n+36*e/(e+38))},v=function(e){var t,r=[],i=e.length,a=0,o=128,s=72,c=e.lastIndexOf("-");c<0&&(c=0);for(var f=0;f<c;++f)e.charCodeAt(f)>=128&&u("not-basic"),r.push(e.charCodeAt(f));for(var h=c>0?c+1:0;h<i;){for(var p=a,v=1,y=36;;y+=36){h>=i&&u("invalid-input");var m=(t=e.charCodeAt(h++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>l((n-a)/v))&&u("overflow"),a+=m*v;var g=y<=s?1:y>=s+26?26:y-s;if(m<g)break;var b=36-g;v>l(n/b)&&u("overflow"),v*=b}var _=r.length+1;s=d(a-p,_,0==p),l(a/_)>n-o&&u("overflow"),o+=l(a/_),a%=_,r.splice(a++,0,o)}return String.fromCodePoint.apply(String,r)},y=function(e){var t=[],r=(e=h(e)).length,i=128,a=0,o=72,s=!0,f=!1,v=void 0;try{for(var y,m=e[Symbol.iterator]();!(s=(y=m.next()).done);s=!0){var g=y.value;g<128&&t.push(c(g))}}catch(e){f=!0,v=e}finally{try{!s&&m.return&&m.return()}finally{if(f)throw v}}var b=t.length,_=b;for(b&&t.push("-");_<r;){var w=n,k=!0,x=!1,E=void 0;try{for(var j,O=e[Symbol.iterator]();!(k=(j=O.next()).done);k=!0){var S=j.value;S>=i&&S<w&&(w=S)}}catch(e){x=!0,E=e}finally{try{!k&&O.return&&O.return()}finally{if(x)throw E}}var A=_+1;w-i>l((n-a)/A)&&u("overflow"),a+=(w-i)*A,i=w;var C=!0,P=!1,T=void 0;try{for(var D,L=e[Symbol.iterator]();!(C=(D=L.next()).done);C=!0){var F=D.value;if(F<i&&++a>n&&u("overflow"),F==i){for(var R=a,I=36;;I+=36){var N=I<=o?1:I>=o+26?26:I-o;if(R<N)break;var q=R-N,W=36-N;t.push(c(p(N+q%W,0))),R=l(q/W)}t.push(c(p(R,0))),o=d(a,A,_==b),a=0,++_}}}catch(e){P=!0,T=e}finally{try{!C&&L.return&&L.return()}finally{if(P)throw T}}++a,++i}return t.join("")},m={version:"2.1.0",ucs2:{decode:h,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:v,encode:y,toASCII:function(e){return f(e,function(e){return a.test(e)?"xn--"+y(e):e})},toUnicode:function(e){return f(e,function(e){return i.test(e)?v(e.slice(4).toLowerCase()):e})}};e.exports=m},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(13),a={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};a.specials=function(){var e=new Array(256);e.fill(!1);for(var t=0;t<'()<>[]:;@\\,."'.length;++t)e['()<>[]:;@\\,."'.codePointAt(t)]=!0;return function(t){return e[t]}}(),a.c0Controls=function(){var e=new Array(256);e.fill(!1);for(var t=0;t<33;++t)e[t]=!0;return function(t){return e[t]}}(),a.c1Controls=function(){var e=new Array(256);e.fill(!1);for(var t=127;t<160;++t)e[t]=!0;return function(t){return e[t]}}(),a.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/},a.nulNormalize=function(e){var t=e.split("\0");return(t=t.map(function(e){return e.normalize("NFC")})).join("\0")},a.checkIpV6=function(e){return e.every(function(e){return a.regex.ipV6.test(e)})},a.validDomain=function(e,t){return t.tldBlacklist?Array.isArray(t.tldBlacklist)?-1===a.indexOf.call(t.tldBlacklist,e):!a.hasOwn.call(t.tldBlacklist,e):Array.isArray(t.tldWhitelist)?-1!==a.indexOf.call(t.tldWhitelist,e):a.hasOwn.call(t.tldWhitelist,e)},t.validate=a.validate=function(e,t,r){t=t||{},e=a.normalize(e),"function"==typeof t&&(r=t,t={}),"function"!=typeof r&&(r=null);var o=void 0,s=void 0;if("number"==typeof t.errorLevel?(o=!0,s=t.errorLevel):(o=!!t.errorLevel,s=a.diagnoses.valid),t.tldWhitelist)if("string"==typeof t.tldWhitelist)t.tldWhitelist=[t.tldWhitelist];else if("object"!==n(t.tldWhitelist))throw new TypeError("expected array or object tldWhitelist");if(t.tldBlacklist)if("string"==typeof t.tldBlacklist)t.tldBlacklist=[t.tldBlacklist];else if("object"!==n(t.tldBlacklist))throw new TypeError("expected array or object tldBlacklist");if(t.minDomainAtoms&&(t.minDomainAtoms!==(0|+t.minDomainAtoms)||t.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");var l=a.diagnoses.valid,c=function(e){e>l&&(l=e)};!(void 0===t.allowUnicode||!!t.allowUnicode)&&/[^\x00-\x7f]/.test(e)&&c(a.diagnoses.undesiredNonAscii);for(var u={now:a.components.localpart,prev:a.components.localpart,stack:[a.components.localpart]},f="",h={local:"",domain:""},p={locals:[""],domains:[""]},d=0,v=0,y=0,m=void 0,g=!1,b=!1,_=e.length,w=void 0,k=0;k<_;k+=w.length){switch(w=String.fromCodePoint(e.codePointAt(k)),u.now){case a.components.localpart:switch(w){case"(":0===v?c(0===d?a.diagnoses.cfwsComment:a.diagnoses.deprecatedComment):(c(a.diagnoses.cfwsComment),b=!0),u.stack.push(u.now),u.now=a.components.contextComment;break;case".":0===v?c(0===d?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):(b&&c(a.diagnoses.deprecatedLocalPart),b=!1,v=0,++d,h.local+=w,p.locals[d]="");break;case'"':0===v?(c(0===d?a.diagnoses.rfc5321QuotedString:a.diagnoses.deprecatedLocalPart),h.local+=w,p.locals[d]+=w,v+=Buffer.byteLength(w,"utf8"),b=!0,u.stack.push(u.now),u.now=a.components.contextQuotedString):c(a.diagnoses.errExpectingATEXT);break;case"\r":if(_===++k||"\n"!==e[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===v?c(0===d?a.diagnoses.cfwsFWS:a.diagnoses.deprecatedFWS):b=!0,u.stack.push(u.now),u.now=a.components.contextFWS,f=w;break;case"@":if(1!==u.stack.length)throw new Error("unexpected item on context stack");0===h.local.length?c(a.diagnoses.errNoLocalPart):0===v?c(a.diagnoses.errDotEnd):Buffer.byteLength(h.local,"utf8")>64?c(a.diagnoses.rfc5322LocalTooLong):u.prev!==a.components.contextComment&&u.prev!==a.components.contextFWS||c(a.diagnoses.deprecatedCFWSNearAt),u.now=a.components.domain,u.stack[0]=a.components.domain,d=0,v=0,b=!1;break;default:if(b)switch(u.prev){case a.components.contextComment:case a.components.contextFWS:c(a.diagnoses.errATEXTAfterCFWS);break;case a.components.contextQuotedString:c(a.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+u.prev)}else u.prev=u.now,m=w.codePointAt(0),(a.specials(m)||a.c0Controls(m)||a.c1Controls(m))&&c(a.diagnoses.errExpectingATEXT),h.local+=w,p.locals[d]+=w,v+=Buffer.byteLength(w,"utf8")}break;case a.components.domain:switch(w){case"(":0===v?c(0===d?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedComment):(b=!0,c(a.diagnoses.cfwsComment)),u.stack.push(u.now),u.now=a.components.contextComment;break;case".":var x=i.encode(p.domains[d]).length;0===v?c(0===d?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):g?c(a.diagnoses.errDomainHyphenEnd):x>63&&c(a.diagnoses.rfc5322LabelTooLong),b=!1,v=0,++d,p.domains[d]="",h.domain+=w;break;case"[":0===h.domain.length?(b=!0,v+=Buffer.byteLength(w,"utf8"),u.stack.push(u.now),u.now=a.components.literal,h.domain+=w,p.domains[d]+=w,h.literal=""):c(a.diagnoses.errExpectingATEXT);break;case"\r":if(_===++k||"\n"!==e[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===v?c(0===d?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedFWS):(c(a.diagnoses.cfwsFWS),b=!0),u.stack.push(u.now),u.now=a.components.contextFWS,f=w;break;default:if(b)switch(u.prev){case a.components.contextComment:case a.components.contextFWS:c(a.diagnoses.errATEXTAfterCFWS);break;case a.components.literal:c(a.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+u.prev)}m=w.codePointAt(0),g=!1,a.specials(m)||a.c0Controls(m)||a.c1Controls(m)?c(a.diagnoses.errExpectingATEXT):"-"===w?(0===v&&c(a.diagnoses.errDomainHyphenStart),g=!0):(m<48||m>122&&m<192||m>57&&m<65||m>90&&m<97)&&c(a.diagnoses.rfc5322Domain),h.domain+=w,p.domains[d]+=w,v+=Buffer.byteLength(w,"utf8")}break;case a.components.literal:switch(w){case"]":if(l<a.categories.deprecated){var E=-1,j=h.literal,O=a.regex.ipV4.exec(j);if(O&&0!==(E=O.index)&&(j=j.slice(0,E)+"0:0"),0===E)c(a.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==j.slice(0,5).toLowerCase())c(a.diagnoses.rfc5322DomainLiteral);else{var S=j.slice(5),A=a.maxIPv6Groups,C=S.split(":");~(E=S.indexOf("::"))?E!==S.lastIndexOf("::")?c(a.diagnoses.rfc5322IPv62x2xColon):(0!==E&&E!==S.length-2||++A,C.length>A?c(a.diagnoses.rfc5322IPv6MaxGroups):C.length===A&&c(a.diagnoses.deprecatedIPv6)):C.length!==A&&c(a.diagnoses.rfc5322IPv6GroupCount),":"===S[0]&&":"!==S[1]?c(a.diagnoses.rfc5322IPv6ColonStart):":"===S[S.length-1]&&":"!==S[S.length-2]?c(a.diagnoses.rfc5322IPv6ColonEnd):a.checkIpV6(C)?c(a.diagnoses.rfc5321AddressLiteral):c(a.diagnoses.rfc5322IPv6BadCharacter)}}else c(a.diagnoses.rfc5322DomainLiteral);h.domain+=w,p.domains[d]+=w,v+=Buffer.byteLength(w,"utf8"),u.prev=u.now,u.now=u.stack.pop();break;case"\\":c(a.diagnoses.rfc5322DomainLiteralOBSDText),u.stack.push(u.now),u.now=a.components.contextQuotedPair;break;case"\r":if(_===++k||"\n"!==e[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":c(a.diagnoses.cfwsFWS),u.stack.push(u.now),u.now=a.components.contextFWS,f=w;break;default:if(127!==(m=w.codePointAt(0))&&a.c1Controls(m)||0===m||"["===w){c(a.diagnoses.errExpectingDTEXT);break}(a.c0Controls(m)||127===m)&&c(a.diagnoses.rfc5322DomainLiteralOBSDText),h.literal+=w,h.domain+=w,p.domains[d]+=w,v+=Buffer.byteLength(w,"utf8")}break;case a.components.contextQuotedString:switch(w){case"\\":u.stack.push(u.now),u.now=a.components.contextQuotedPair;break;case"\r":if(_===++k||"\n"!==e[k]){c(a.diagnoses.errCRNoLF);break}case"\t":h.local+=" ",p.locals[d]+=" ",v+=Buffer.byteLength(w,"utf8"),c(a.diagnoses.cfwsFWS),u.stack.push(u.now),u.now=a.components.contextFWS,f=w;break;case'"':h.local+=w,p.locals[d]+=w,v+=Buffer.byteLength(w,"utf8"),u.prev=u.now,u.now=u.stack.pop();break;default:127!==(m=w.codePointAt(0))&&a.c1Controls(m)||0===m||10===m?c(a.diagnoses.errExpectingQTEXT):(a.c0Controls(m)||127===m)&&c(a.diagnoses.deprecatedQTEXT),h.local+=w,p.locals[d]+=w,v+=Buffer.byteLength(w,"utf8")}break;case a.components.contextQuotedPair:127!==(m=w.codePointAt(0))&&a.c1Controls(m)?c(a.diagnoses.errExpectingQPair):(m<31&&9!==m||127===m)&&c(a.diagnoses.deprecatedQP),u.prev=u.now,u.now=u.stack.pop();var P="\\"+w;switch(u.now){case a.components.contextComment:break;case a.components.contextQuotedString:h.local+=P,p.locals[d]+=P,v+=2;break;case a.components.literal:h.domain+=P,p.domains[d]+=P,v+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+u.now)}break;case a.components.contextComment:switch(w){case"(":u.stack.push(u.now),u.now=a.components.contextComment;break;case")":u.prev=u.now,u.now=u.stack.pop();break;case"\\":u.stack.push(u.now),u.now=a.components.contextQuotedPair;break;case"\r":if(_===++k||"\n"!==e[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":c(a.diagnoses.cfwsFWS),u.stack.push(u.now),u.now=a.components.contextFWS,f=w;break;default:if(0===(m=w.codePointAt(0))||10===m||127!==m&&a.c1Controls(m)){c(a.diagnoses.errExpectingCTEXT);break}(a.c0Controls(m)||127===m)&&c(a.diagnoses.deprecatedCTEXT)}break;case a.components.contextFWS:if("\r"===f){if("\r"===w){c(a.diagnoses.errFWSCRLFx2);break}++y>1?c(a.diagnoses.deprecatedFWS):y=1}switch(w){case"\r":_!==++k&&"\n"===e[k]||c(a.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===f&&c(a.diagnoses.errFWSCRLFEnd),y=0,u.prev=u.now,u.now=u.stack.pop(),--k}f=w;break;default:throw new Error("unknown context: "+u.now)}if(l>a.categories.rfc5322)break}if(l<a.categories.rfc5322){var T=i.encode(h.domain).length;if(u.now===a.components.contextQuotedString)c(a.diagnoses.errUnclosedQuotedString);else if(u.now===a.components.contextQuotedPair)c(a.diagnoses.errBackslashEnd);else if(u.now===a.components.contextComment)c(a.diagnoses.errUnclosedComment);else if(u.now===a.components.literal)c(a.diagnoses.errUnclosedDomainLiteral);else if("\r"===w)c(a.diagnoses.errFWSCRLFEnd);else if(0===h.domain.length)c(a.diagnoses.errNoDomain);else if(0===v)c(a.diagnoses.errDotEnd);else if(g)c(a.diagnoses.errDomainHyphenEnd);else if(T>255)c(a.diagnoses.rfc5322DomainTooLong);else if(Buffer.byteLength(h.local,"utf8")+T+1>254)c(a.diagnoses.rfc5322TooLong);else if(v>63)c(a.diagnoses.rfc5322LabelTooLong);else if(t.minDomainAtoms&&p.domains.length<t.minDomainAtoms)c(a.diagnoses.errDomainTooShort);else if(t.tldWhitelist||t.tldBlacklist){var D=p.domains[d];a.validDomain(D,t)||c(a.diagnoses.errUnknownTLD)}}l<a.categories.dnsWarn&&(p.domains[d].codePointAt(0)<=57&&c(a.diagnoses.rfc5321TLDNumeric));l<s&&(l=a.diagnoses.valid);var L=o?l:l<a.defaultThreshold;return r&&r(L),L},t.diagnoses=a.validate.diagnoses=function(){for(var e={},t=Object.keys(a.diagnoses),r=0;r<t.length;++r){var n=t[r];e[n]=a.diagnoses[n]}return e}(),t.normalize=a.normalize=function(e){return"4"===process.version[1]&&e.indexOf("\0")>=0?a.nulNormalize(e):e.normalize("NFC")}},function(e,t,r){"use strict";var n=r(5),i={Ip:{cidrs:{ipv4:{required:"\\/(?:"+n.ipv4Cidr+")",optional:"(?:\\/(?:"+n.ipv4Cidr+"))?",forbidden:""},ipv6:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""},ipvfuture:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""}},versions:{ipv4:n.IPv4address,ipv6:n.IPv6address,ipvfuture:n.IPvFuture}}};i.Ip.createIpRegex=function(e,t){for(var r=void 0,n=0;n<e.length;++n){var a=e[n];r?r+="|"+i.Ip.versions[a]+i.Ip.cidrs[a][t]:r="^(?:"+i.Ip.versions[a]+i.Ip.cidrs[a][t]}return new RegExp(r+")$")},e.exports=i.Ip},function(e,t,r){"use strict";var n=r(5),i={Uri:{createUriRegex:function(e,t,r){var i=n.scheme,a=void 0;if(r)a="(?:"+n.relativeRef+")";else{e&&(i="(?:"+e+")");var o="(?:"+i+":"+n.hierPart+")";a=t?"(?:"+o+"|"+n.relativeRef+")":o}return new RegExp("^"+a+"(?:\\?"+n.query+")?(?:#"+n.fragment+")?$")}}};e.exports=i.Uri},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(0),o=void 0,s=r(2),l=r(1),c=r(7),u=r(16),f=r(15),h={uriRegex:u.createUriRegex(),ipRegex:f.createIpRegex(["ipv4","ipv6","ipvfuture"],"optional"),guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};h.String=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="string",e._invalids.add(""),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),i(t,[{key:"_base",value:function(e,t,r){if("string"==typeof e&&r.convert){if(this._flags.normalize&&(e=e.normalize(this._flags.normalize)),this._flags.case&&(e="upper"===this._flags.case?e.toLocaleUpperCase():e.toLocaleLowerCase()),this._flags.trim&&(e=e.trim()),this._inner.replacements)for(var n=0;n<this._inner.replacements.length;++n){var i=this._inner.replacements[n];e=e.replace(i.pattern,i.replacement)}if(this._flags.truncate)for(var a=0;a<this._tests.length;++a){var o=this._tests[a];if("max"===o.name){e=e.slice(0,o.arg);break}}}return{value:e,errors:"string"==typeof e?null:this.createError("string.base",{value:e},t,r)}}},{key:"insensitive",value:function(){if(this._flags.insensitive)return this;var e=this.clone();return e._flags.insensitive=!0,e}},{key:"creditCard",value:function(){return this._test("creditCard",void 0,function(e,t,r){for(var n=e.length,i=0,a=1;n--;){var o=e.charAt(n)*a;i+=o-9*(o>9),a^=3}return i%10==0&&i>0?e:this.createError("string.creditCard",{value:e},t,r)})}},{key:"regex",value:function(e,t){a.assert(e instanceof RegExp,"pattern must be a RegExp");var r={pattern:new RegExp(e.source,e.ignoreCase?"i":void 0)};"string"==typeof t?r.name=t:"object"===(void 0===t?"undefined":n(t))&&(r.invert=!!t.invert,t.name&&(r.name=t.name));var i=["string.regex",r.invert?".invert":"",r.name?".name":".base"].join("");return this._test("regex",r,function(e,t,n){return r.pattern.test(e)^r.invert?e:this.createError(i,{name:r.name,pattern:r.pattern,value:e},t,n)})}},{key:"alphanum",value:function(){return this._test("alphanum",void 0,function(e,t,r){return/^[a-zA-Z0-9]+$/.test(e)?e:this.createError("string.alphanum",{value:e},t,r)})}},{key:"token",value:function(){return this._test("token",void 0,function(e,t,r){return/^\w+$/.test(e)?e:this.createError("string.token",{value:e},t,r)})}},{key:"email",value:function(e){return e&&(a.assert("object"===(void 0===e?"undefined":n(e)),"email options must be an object"),a.assert(void 0===e.checkDNS,"checkDNS option is not supported"),a.assert(void 0===e.tldWhitelist||"object"===n(e.tldWhitelist),"tldWhitelist must be an array or object"),a.assert(void 0===e.minDomainAtoms||Number.isSafeInteger(e.minDomainAtoms)&&e.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),a.assert(void 0===e.errorLevel||"boolean"==typeof e.errorLevel||Number.isSafeInteger(e.errorLevel)&&e.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",e,function(t,n,i){o=o||r(14);try{var a=o.validate(t,e);if(!0===a||0===a)return t}catch(e){}return this.createError("string.email",{value:t},n,i)})}},{key:"ip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h.ipRegex;a.assert("object"===(void 0===e?"undefined":n(e)),"options must be an object"),e.cidr?(a.assert("string"==typeof e.cidr,"cidr must be a string"),e.cidr=e.cidr.toLowerCase(),a.assert(a.contain(h.cidrPresences,e.cidr),"cidr must be one of "+h.cidrPresences.join(", ")),e.version||"optional"===e.cidr||(t=f.createIpRegex(["ipv4","ipv6","ipvfuture"],e.cidr))):e.cidr="optional";var r=void 0;if(e.version){Array.isArray(e.version)||(e.version=[e.version]),a.assert(e.version.length>=1,"version must have at least 1 version specified"),r=[];for(var i=0;i<e.version.length;++i){var o=e.version[i];a.assert("string"==typeof o,"version at position "+i+" must be a string"),o=o.toLowerCase(),a.assert(f.versions[o],"version at position "+i+" must be one of "+Object.keys(f.versions).join(", ")),r.push(o)}r=a.unique(r),t=f.createIpRegex(r,e.cidr)}return this._test("ip",e,function(n,i,a){return t.test(n)?n:r?this.createError("string.ipVersion",{value:n,cidr:e.cidr,version:r},i,a):this.createError("string.ip",{value:n,cidr:e.cidr},i,a)})}},{key:"uri",value:function(e){var t="",r=!1,i=!1,o=h.uriRegex;if(e){if(a.assert("object"===(void 0===e?"undefined":n(e)),"options must be an object"),e.scheme){a.assert(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(e.scheme)||(e.scheme=[e.scheme]),a.assert(e.scheme.length>=1,"scheme must have at least 1 scheme specified");for(var s=0;s<e.scheme.length;++s){var l=e.scheme[s];a.assert(l instanceof RegExp||"string"==typeof l,"scheme at position "+s+" must be a RegExp or String"),t+=t?"|":"",l instanceof RegExp?t+=l.source:(a.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(l),"scheme at position "+s+" must be a valid scheme"),t+=a.escapeRegex(l))}}e.allowRelative&&(r=!0),e.relativeOnly&&(i=!0)}return(t||r||i)&&(o=u.createUriRegex(t,r,i)),this._test("uri",e,function(e,r,n){return o.test(e)?e:i?this.createError("string.uriRelativeOnly",{value:e},r,n):t?this.createError("string.uriCustomScheme",{scheme:t,value:e},r,n):this.createError("string.uri",{value:e},r,n)})}},{key:"isoDate",value:function(){return this._test("isoDate",void 0,function(e,t,r){if(c._isIsoDate(e)){if(!r.convert)return e;var n=new Date(e);if(!isNaN(n.getTime()))return n.toISOString()}return this.createError("string.isoDate",{value:e},t,r)})}},{key:"guid",value:function(e){var t="";if(e&&e.version){Array.isArray(e.version)||(e.version=[e.version]),a.assert(e.version.length>=1,"version must have at least 1 valid version specified");for(var r=new Set,n=0;n<e.version.length;++n){var i=e.version[n];a.assert("string"==typeof i,"version at position "+n+" must be a string"),i=i.toLowerCase();var o=h.guidVersions[i];a.assert(o,"version at position "+n+" must be one of "+Object.keys(h.guidVersions).join(", ")),a.assert(!r.has(o),"version at position "+n+" must not be a duplicate."),t+=o,r.add(o)}}var s=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?["+(t||"0-9A-F")+"][0-9A-F]{3}\\2?["+(t?"89AB":"0-9A-F")+"][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$","i");return this._test("guid",e,function(e,t,r){var n=s.exec(e);return n?h.guidBrackets[n[1]]!==n[n.length-1]?this.createError("string.guid",{value:e},t,r):e:this.createError("string.guid",{value:e},t,r)})}},{key:"hex",value:function(){var e=/^[a-f0-9]+$/i;return this._test("hex",e,function(t,r,n){return e.test(t)?t:this.createError("string.hex",{value:t},r,n)})}},{key:"base64",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assert("object"===(void 0===e?"undefined":n(e)),"base64 options must be an object"),a.assert(void 0===e.paddingRequired||"boolean"==typeof e.paddingRequired,"paddingRequired must be boolean");var t=(!1===e.paddingRequired?e.paddingRequired:e.paddingRequired||!0)?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("base64",t,function(e,r,n){return t.test(e)?e:this.createError("string.base64",{value:e},r,n)})}},{key:"hostname",value:function(){var e=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,function(t,r,n){return t.length<=255&&e.test(t)||a.isIPv6(t)?t:this.createError("string.hostname",{value:t},r,n)})}},{key:"normalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";a.assert(a.contain(h.normalizationForms,e),"normalization form must be one of "+h.normalizationForms.join(", "));var t=this._test("normalize",e,function(t,r,n){return n.convert||t===t.normalize(e)?t:this.createError("string.normalize",{value:t,form:e},r,n)});return t._flags.normalize=e,t}},{key:"lowercase",value:function(){var e=this._test("lowercase",void 0,function(e,t,r){return r.convert||e===e.toLocaleLowerCase()?e:this.createError("string.lowercase",{value:e},t,r)});return e._flags.case="lower",e}},{key:"uppercase",value:function(){var e=this._test("uppercase",void 0,function(e,t,r){return r.convert||e===e.toLocaleUpperCase()?e:this.createError("string.uppercase",{value:e},t,r)});return e._flags.case="upper",e}},{key:"trim",value:function(){var e=this._test("trim",void 0,function(e,t,r){return r.convert||e===e.trim()?e:this.createError("string.trim",{value:e},t,r)});return e._flags.trim=!0,e}},{key:"replace",value:function(e,t){"string"==typeof e&&(e=new RegExp(a.escapeRegex(e),"g")),a.assert(e instanceof RegExp,"pattern must be a RegExp"),a.assert("string"==typeof t,"replacement must be a String");var r=this.clone();return r._inner.replacements||(r._inner.replacements=[]),r._inner.replacements.push({pattern:e,replacement:t}),r}},{key:"truncate",value:function(e){var t=void 0===e||!!e;if(this._flags.truncate===t)return this;var r=this.clone();return r._flags.truncate=t,r}}]),t}(),h.compare=function(e,t){return function(r,n){var i=l.isRef(r);return a.assert(Number.isSafeInteger(r)&&r>=0||i,"limit must be a positive integer or reference"),a.assert(!n,"Invalid encoding:",n),this._test(e,r,function(a,o,s){var l=void 0;if(i){if(l=r(o.reference||o.parent,s),!Number.isSafeInteger(l))return this.createError("string.ref",{ref:r.key},o,s)}else l=r;return t(a,l,n)?a:this.createError("string."+e,{limit:l,value:a,encoding:n},o,s)})}},h.String.prototype.min=h.compare("min",function(e,t,r){return e.length>=t}),h.String.prototype.max=h.compare("max",function(e,t,r){return e.length<=t}),h.String.prototype.length=h.compare("length",function(e,t,r){return e.length===t}),h.String.prototype.uuid=h.String.prototype.guid,e.exports=new h.String},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(2),a=r(1),o=r(0),s={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};s.Number=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="number",e._invalids.add(1/0),e._invalids.add(-1/0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),n(t,[{key:"_base",value:function(e,t,r){var n={errors:null,value:e};if("string"==typeof e&&r.convert){var i=parseFloat(e);n.value=isNaN(i)||!isFinite(e)?NaN:i}var a="number"==typeof n.value&&!isNaN(n.value);if(r.convert&&"precision"in this._flags&&a){var o=Math.pow(10,this._flags.precision);n.value=Math.round(n.value*o)/o}return n.errors=a?null:this.createError("number.base",null,t,r),n}},{key:"multiple",value:function(e){var t=a.isRef(e);return t||(o.assert("number"==typeof e&&isFinite(e),"multiple must be a number"),o.assert(e>0,"multiple must be greater than 0")),this._test("multiple",e,function(r,n,i){var a=t?e(n.reference||n.parent,i):e;return!t||"number"==typeof a&&isFinite(a)?r%a==0?r:this.createError("number.multiple",{multiple:e,value:r},n,i):this.createError("number.ref",{ref:e.key},n,i)})}},{key:"integer",value:function(){return this._test("integer",void 0,function(e,t,r){return Number.isSafeInteger(e)?e:this.createError("number.integer",{value:e},t,r)})}},{key:"negative",value:function(){return this._test("negative",void 0,function(e,t,r){return e<0?e:this.createError("number.negative",{value:e},t,r)})}},{key:"positive",value:function(){return this._test("positive",void 0,function(e,t,r){return e>0?e:this.createError("number.positive",{value:e},t,r)})}},{key:"precision",value:function(e){o.assert(Number.isSafeInteger(e),"limit must be an integer"),o.assert(!("precision"in this._flags),"precision already set");var t=this._test("precision",e,function(t,r,n){var i=t.toString().match(s.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=e?t:this.createError("number.precision",{limit:e,value:t},r,n)});return t._flags.precision=e,t}},{key:"port",value:function(){return this._test("port",void 0,function(e,t,r){return!Number.isSafeInteger(e)||e<0||e>65535?this.createError("number.port",{value:e},t,r):e})}}]),t}(),s.compare=function(e,t){return function(r){var n=a.isRef(r),i="number"==typeof r&&!isNaN(r);return o.assert(i||n,"limit must be a number or reference"),this._test(e,r,function(i,a,o){var s=void 0;if(n){if("number"!=typeof(s=r(a.reference||a.parent,o))||isNaN(s))return this.createError("number.ref",{ref:r.key},a,o)}else s=r;return t(i,s)?i:this.createError("number."+e,{limit:s,value:i},a,o)})}},s.Number.prototype.min=s.compare("min",function(e,t){return e>=t}),s.Number.prototype.max=s.compare("max",function(e,t){return e<=t}),s.Number.prototype.greater=s.compare("greater",function(e,t){return e>t}),s.Number.prototype.less=s.compare("less",function(e,t){return e<t}),e.exports=new s.Number},function(e,t,r){"use strict";var n=r(0),i={};e.exports=i.Topo=function(){this._items=[],this.nodes=[]},i.Topo.prototype.add=function(e,t){var r=this,i=[].concat((t=t||{}).before||[]),a=[].concat(t.after||[]),o=t.group||"?",s=t.sort||0;n.assert(-1===i.indexOf(o),"Item cannot come before itself:",o),n.assert(-1===i.indexOf("?"),"Item cannot come before unassociated items"),n.assert(-1===a.indexOf(o),"Item cannot come after itself:",o),n.assert(-1===a.indexOf("?"),"Item cannot come after unassociated items"),[].concat(e).forEach(function(e,t){var n={seq:r._items.length,sort:s,before:i,after:a,group:o,node:e};r._items.push(n)});var l=this._sort();return n.assert(!l,"item","?"!==o?"added into group "+o:"","created a dependencies error"),this.nodes},i.Topo.prototype.merge=function(e){e=[].concat(e);for(var t=0;t<e.length;++t){var r=e[t];if(r)for(var a=0;a<r._items.length;++a){var o=n.shallow(r._items[a]);this._items.push(o)}}this._items.sort(i.mergeSort);for(var s=0;s<this._items.length;++s)this._items[s].seq=s;var l=this._sort();return n.assert(!l,"merge created a dependencies error"),this.nodes},i.mergeSort=function(e,t){return e.sort===t.sort?0:e.sort<t.sort?-1:1},i.Topo.prototype._sort=function(){for(var e={},t=Object.create(null),r=Object.create(null),n=0;n<this._items.length;++n){var i=this._items[n],a=i.seq,o=i.group;r[o]=r[o]||[],r[o].push(a),e[a]=i.before;for(var s=i.after,l=0;l<s.length;++l)t[s[l]]=(t[s[l]]||[]).concat(a)}for(var c=Object.keys(e),u=0;u<c.length;++u){for(var f=c[u],h=[],p=Object.keys(e[f]),d=0;d<p.length;++d){var v=e[f][p[d]];r[v]=r[v]||[];for(var y=0;y<r[v].length;++y)h.push(r[v][y])}e[f]=h}for(var m=Object.keys(t),g=0;g<m.length;++g){var b=m[g];if(r[b])for(var _=0;_<r[b].length;++_){var w=r[b][_];e[w]=e[w].concat(t[b])}}var k=void 0,x={};c=Object.keys(e);for(var E=0;E<c.length;++E){var j=c[E];k=e[j];for(var O=0;O<k.length;++O)x[k[O]]=(x[k[O]]||[]).concat(j)}for(var S={},A=[],C=0;C<this._items.length;++C){var P=C;if(x[C]){P=null;for(var T=0;T<this._items.length;++T)if(!0!==S[T]){x[T]||(x[T]=[]);for(var D=x[T].length,L=0,F=0;F<D;++F)S[x[T][F]]&&++L;if(L===D){P=T;break}}}null!==P&&(S[P]=!0,A.push(P))}if(A.length!==this._items.length)return new Error("Invalid dependencies");for(var R={},I=0;I<this._items.length;++I){var N=this._items[I];R[N.seq]=N}var q=[];this._items=A.map(function(e){var t=R[e];return q.push(t.node),t}),this.nodes=q}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(0),a=r(6),o=r(1),s={};s.Func=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._flags.func=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.constructor),n(t,[{key:"arity",value:function(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("arity",e,function(t,r,n){return t.length===e?t:this.createError("function.arity",{n:e},r,n)})}},{key:"minArity",value:function(e){return i.assert(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this._test("minArity",e,function(t,r,n){return t.length>=e?t:this.createError("function.minArity",{n:e},r,n)})}},{key:"maxArity",value:function(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("maxArity",e,function(t,r,n){return t.length<=e?t:this.createError("function.maxArity",{n:e},r,n)})}},{key:"ref",value:function(){return this._test("ref",null,function(e,t,r){return o.isRef(e)?e:this.createError("function.ref",null,t,r)})}},{key:"class",value:function(){return this._test("class",null,function(e,t,r){return/^\s*class\s/.test(e.toString())?e:this.createError("function.class",null,t,r)})}}]),t}(),e.exports=new s.Func},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(2),a=r(0),o={Set:r(9)};o.Boolean=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="boolean",e._flags.insensitive=!0,e._inner.truthySet=new o.Set,e._inner.falsySet=new o.Set,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),n(t,[{key:"_base",value:function(e,t,r){var n={value:e};if("string"==typeof e&&r.convert){var i=this._flags.insensitive?e.toLowerCase():e;n.value="true"===i||"false"!==i&&e}return"boolean"!=typeof n.value&&(n.value=!!this._inner.truthySet.has(e,null,null,this._flags.insensitive)||!this._inner.falsySet.has(e,null,null,this._flags.insensitive)&&e),n.errors="boolean"==typeof n.value?null:this.createError("boolean.base",null,t,r),n}},{key:"truthy",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this.clone();t=a.flatten(t);for(var i=0;i<t.length;++i){var o=t[i];a.assert(void 0!==o,"Cannot call truthy with undefined"),n._inner.truthySet.add(o)}return n}},{key:"falsy",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this.clone();t=a.flatten(t);for(var i=0;i<t.length;++i){var o=t[i];a.assert(void 0!==o,"Cannot call falsy with undefined"),n._inner.falsySet.add(o)}return n}},{key:"insensitive",value:function(e){var t=void 0===e||!!e;if(this._flags.insensitive===t)return this;var r=this.clone();return r._flags.insensitive=t,r}},{key:"describe",value:function(){var e=i.prototype.describe.call(this);return e.truthy=[!0].concat(this._inner.truthySet.values()),e.falsy=[!1].concat(this._inner.falsySet.values()),e}}]),t}(),e.exports=new o.Boolean},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(2),o=r(3),s=r(1),l=r(0),c={fastSplice:function(e,t){for(var r=t;r<e.length;)e[r++]=e[r];--e.length}};c.Array=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="array",e._inner.items=[],e._inner.ordereds=[],e._inner.inclusions=[],e._inner.exclusions=[],e._inner.requireds=[],e._flags.sparse=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a),i(t,[{key:"_base",value:function(e,t,r){var n={value:e};"string"==typeof e&&r.convert&&c.safeParse(e,n);var i=Array.isArray(n.value),a=i;if(r.convert&&this._flags.single&&!i&&(n.value=[n.value],i=!0),!i)return n.errors=this.createError("array.base",null,t,r),n;if((this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse)&&(a&&(n.value=n.value.slice(0)),n.errors=this._checkItems.call(this,n.value,a,t,r),n.errors&&a&&r.convert&&this._flags.single)){var o=n.errors;n.value=[n.value],n.errors=this._checkItems.call(this,n.value,a,t,r),n.errors&&(n.errors=o,n.value=n.value[0])}return n}},{key:"_checkItems",value:function(e,t,r,n){for(var i=[],a=void 0,o=this._inner.requireds.slice(),s=this._inner.ordereds.slice(),l=this._inner.inclusions.concat(o),u=e.length,f=0;f<u;++f){a=!1;var h=e[f],p=!1,d={key:t?f:r.key,path:t?r.path.concat(f):r.path,parent:r.parent,reference:r.reference},v=void 0;if(this._flags.sparse||void 0!==h){for(var y=0;y<this._inner.exclusions.length;++y)if(!(v=this._inner.exclusions[y]._validate(h,d,{})).errors){if(i.push(this.createError(t?"array.excludes":"array.excludesSingle",{pos:f,value:h},{key:r.key,path:d.path},n)),a=!0,n.abortEarly)return i;s.shift();break}if(!a){if(this._inner.ordereds.length){if(s.length>0){var m=s.shift();if((v=m._validate(h,d,n)).errors){if(i.push(this.createError("array.ordered",{pos:f,reason:v.errors,value:h},{key:r.key,path:d.path},n)),n.abortEarly)return i}else if(m._flags.strip)c.fastSplice(e,f),--f,--u;else{if(!this._flags.sparse&&void 0===v.value){if(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly)return i;continue}e[f]=v.value}continue}if(!this._inner.items.length){if(i.push(this.createError("array.orderedLength",{pos:f,limit:this._inner.ordereds.length},{key:r.key,path:d.path},n)),n.abortEarly)return i;continue}}for(var g=[],b=o.length,_=0;_<b;++_)if(!(v=g[_]=o[_]._validate(h,d,n)).errors){if(e[f]=v.value,p=!0,c.fastSplice(o,_),--_,--b,!this._flags.sparse&&void 0===v.value&&(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly))return i;break}if(!p){var w=!!n.stripUnknown&&(!0===n.stripUnknown||!!n.stripUnknown.arrays);b=l.length;for(var k=0;k<b;++k){var x=l[k],E=o.indexOf(x);if(-1!==E)v=g[E];else if(!(v=x._validate(h,d,n)).errors){x._flags.strip?(c.fastSplice(e,f),--f,--u):this._flags.sparse||void 0!==v.value?e[f]=v.value:(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),a=!0),p=!0;break}if(1===b){if(w){c.fastSplice(e,f),--f,--u,p=!0;break}if(i.push(this.createError(t?"array.includesOne":"array.includesOneSingle",{pos:f,reason:v.errors,value:h},{key:r.key,path:d.path},n)),a=!0,n.abortEarly)return i;break}}if(!a&&this._inner.inclusions.length&&!p){if(w){c.fastSplice(e,f),--f,--u;continue}if(i.push(this.createError(t?"array.includes":"array.includesSingle",{pos:f,value:h},{key:r.key,path:d.path},n)),n.abortEarly)return i}}}}else{if(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly)return i;s.shift()}}return o.length&&this._fillMissedErrors.call(this,i,o,r,n),s.length&&this._fillOrderedErrors.call(this,i,s,r,n),i.length?i:null}},{key:"describe",value:function(){var e=a.prototype.describe.call(this);if(this._inner.ordereds.length){e.orderedItems=[];for(var t=0;t<this._inner.ordereds.length;++t)e.orderedItems.push(this._inner.ordereds[t].describe())}if(this._inner.items.length){e.items=[];for(var r=0;r<this._inner.items.length;++r)e.items.push(this._inner.items[r].describe())}return e}},{key:"items",value:function(){for(var e=this,t=this.clone(),r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return l.flatten(n).forEach(function(r,n){try{r=o.schema(e._currentJoi,r)}catch(e){throw e.hasOwnProperty("path")?e.path=n+"."+e.path:e.path=n,e.message=e.message+"("+e.path+")",e}t._inner.items.push(r),"required"===r._flags.presence?t._inner.requireds.push(r):"forbidden"===r._flags.presence?t._inner.exclusions.push(r.optional()):t._inner.inclusions.push(r)}),t}},{key:"ordered",value:function(){for(var e=this,t=this.clone(),r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return l.flatten(n).forEach(function(r,n){try{r=o.schema(e._currentJoi,r)}catch(e){throw e.hasOwnProperty("path")?e.path=n+"."+e.path:e.path=n,e.message=e.message+"("+e.path+")",e}t._inner.ordereds.push(r)}),t}},{key:"min",value:function(e){var t=s.isRef(e);return l.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("min",e,function(r,n,i){var a=void 0;if(t){if(a=e(n.reference||n.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},n,i)}else a=e;return r.length>=a?r:this.createError("array.min",{limit:e,value:r},n,i)})}},{key:"max",value:function(e){var t=s.isRef(e);return l.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("max",e,function(r,n,i){var a=void 0;if(t){if(a=e(n.reference||n.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},n,i)}else a=e;return r.length<=a?r:this.createError("array.max",{limit:e,value:r},n,i)})}},{key:"length",value:function(e){var t=s.isRef(e);return l.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("length",e,function(r,n,i){var a=void 0;if(t){if(a=e(n.reference||n.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},n,i)}else a=e;return r.length===a?r:this.createError("array.length",{limit:e,value:r},n,i)})}},{key:"unique",value:function(e){l.assert(void 0===e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string");var t={};return"string"==typeof e?t.path=e:"function"==typeof e&&(t.comparator=e),this._test("unique",t,function(e,r,i){for(var a={string:{},number:{},undefined:{},boolean:{},object:new Map,function:new Map,custom:new Map},o=t.comparator||l.deepEqual,s=0;s<e.length;++s){var c=t.path?l.reach(e[s],t.path):e[s],u=t.comparator?a.custom:a[void 0===c?"undefined":n(c)];if(u)if(u instanceof Map){for(var f=u.entries(),h=void 0;!(h=f.next()).done;)if(o(h.value[0],c)){var p={key:r.key,path:r.path.concat(s),parent:r.parent,reference:r.reference},d={pos:s,value:e[s],dupePos:h.value[1],dupeValue:e[h.value[1]]};return t.path&&(d.path=t.path),this.createError("array.unique",d,p,i)}u.set(c,s)}else{if(void 0!==u[c]){var v={key:r.key,path:r.path.concat(s),parent:r.parent,reference:r.reference},y={pos:s,value:e[s],dupePos:u[c],dupeValue:e[u[c]]};return t.path&&(y.path=t.path),this.createError("array.unique",y,v,i)}u[c]=s}}return e})}},{key:"sparse",value:function(e){var t=void 0===e||!!e;if(this._flags.sparse===t)return this;var r=this.clone();return r._flags.sparse=t,r}},{key:"single",value:function(e){var t=void 0===e||!!e;if(this._flags.single===t)return this;var r=this.clone();return r._flags.single=t,r}},{key:"_fillMissedErrors",value:function(e,t,r,n){for(var i=[],a=0,o=0;o<t.length;++o){var s=t[o]._getLabel();s?i.push(s):++a}i.length?a?e.push(this.createError("array.includesRequiredBoth",{knownMisses:i,unknownMisses:a},{key:r.key,path:r.path},n)):e.push(this.createError("array.includesRequiredKnowns",{knownMisses:i},{key:r.key,path:r.path},n)):e.push(this.createError("array.includesRequiredUnknowns",{unknownMisses:a},{key:r.key,path:r.path},n))}},{key:"_fillOrderedErrors",value:function(e,t,r,n){for(var i=[],a=0;a<t.length;++a){"required"===l.reach(t[a],"_flags.presence")&&i.push(t[a])}i.length&&this._fillMissedErrors.call(this,e,i,r,n)}}]),t}(),c.safeParse=function(e,t){try{var r=JSON.parse(e);Array.isArray(r)&&(t.value=r)}catch(e){}},e.exports=new c.Array},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(2),a=r(0),o={};o.Lazy=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type="lazy",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),n(t,[{key:"_base",value:function(e,t,r){var n={value:e},a=this._flags.lazy;if(!a)return n.errors=this.createError("lazy.base",null,t,r),n;var o=a();return o instanceof i?o._validate(e,t,r):(n.errors=this.createError("lazy.schema",null,t,r),n)}},{key:"set",value:function(e){a.assert("function"==typeof e,"You must provide a function as first argument");var t=this.clone();return t._flags.lazy=e,t}}]),t}(),e.exports=new o.Lazy},function(e,t,r){"use strict";var n=r(11);t.options=n.object({abortEarly:n.boolean(),convert:n.boolean(),allowUnknown:n.boolean(),skipFunctions:n.boolean(),stripUnknown:[n.boolean(),n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects")],language:n.object(),presence:n.string().only("required","optional","forbidden","ignore"),raw:n.boolean(),context:n.object(),strip:n.boolean(),noDefaults:n.boolean(),escapeHtml:n.boolean()}).strict()},function(e,t,r){"use strict";t.errors={root:"value",key:'"{{!label}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}",default:"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives",child:null},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!label}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",ordered:"at position {{pos}} fails because {{reason}}",orderedLength:"at position {{pos}} fails because array must contain at most {{limit}} items",ref:'references "{{ref}}" which is not a positive integer',sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},boolean:{base:"must be a boolean"},date:{base:"must be a number of milliseconds or valid date string",format:"must be a string with one of the following formats {{format}}",strict:"must be a valid date",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',isoDate:"must be a valid ISO 8601 date",timestamp:{javascript:"must be a valid timestamp or number of milliseconds",unix:"must be a valid timestamp or number of seconds"},ref:'references "{{ref}}" which is not a date'},function:{base:"must be a Function",arity:"must have an arity of {{n}}",minArity:"must have an arity greater or equal to {{n}}",maxArity:"must have an arity lesser or equal to {{n}}",ref:"must be a Joi reference",class:"must be a class"},lazy:{base:"!!schema error: lazy schema must be set",schema:"!!schema error: lazy schema function must return a schema"},object:{base:"must be an object",child:'!!child "{{!child}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:"must contain at least one of {{peersWithLabels}}",xor:"contains a conflict between exclusive peers {{peersWithLabels}}",or:"must contain at least one of {{peersWithLabels}}",and:"contains {{presentWithLabels}} without its required peers {{missingWithLabels}}",nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:"must be a Joi instance"},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}",float:"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",ref:'references "{{ref}}" which is not a number',multiple:"must be a multiple of {{multiple}}",port:"must be a valid port"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:"must be a valid email",uri:"must be a valid uri",uriRelativeOnly:"must be a valid relative uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",base64:"must be a valid base64 string",hostname:"must be a valid hostname",normalize:"must be unicode normalized in the {{form}} form",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card",ref:'references "{{ref}}" which is not a number',ip:"must be a valid ip address with a {{cidr}} CIDR",ipVersion:"must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR"}}}]);